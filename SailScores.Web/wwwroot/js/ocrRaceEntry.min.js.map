{"version":3,"file":"ocrRaceEntry.min.js","mappings":"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","sources":["webpack://asp.net/external var \"jQuery\"","webpack://asp.net/webpack/bootstrap","webpack://asp.net/./node_modules/@cropper/utils/dist/utils.esm.raw.js","webpack://asp.net/./node_modules/@cropper/element/dist/element.esm.raw.js","webpack://asp.net/./node_modules/@cropper/element-canvas/dist/element-canvas.esm.raw.js","webpack://asp.net/./node_modules/@cropper/element-image/dist/element-image.esm.raw.js","webpack://asp.net/./node_modules/@cropper/element-shade/dist/element-shade.esm.raw.js","webpack://asp.net/./node_modules/@cropper/element-handle/dist/element-handle.esm.raw.js","webpack://asp.net/./node_modules/@cropper/element-selection/dist/element-selection.esm.raw.js","webpack://asp.net/./node_modules/@cropper/element-grid/dist/element-grid.esm.raw.js","webpack://asp.net/./node_modules/@cropper/element-crosshair/dist/element-crosshair.esm.raw.js","webpack://asp.net/./node_modules/@cropper/element-viewer/dist/element-viewer.esm.raw.js","webpack://asp.net/./node_modules/cropperjs/dist/cropper.esm.raw.js"],"sourcesContent":["module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nconst WINDOW = IS_BROWSER ? window : {};\nconst IS_TOUCH_DEVICE = IS_BROWSER ? 'ontouchstart' in WINDOW.document.documentElement : false;\nconst HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\nconst NAMESPACE = 'cropper';\nconst CROPPER_CANVAS = `${NAMESPACE}-canvas`;\nconst CROPPER_CROSSHAIR = `${NAMESPACE}-crosshair`;\nconst CROPPER_GIRD = `${NAMESPACE}-grid`;\nconst CROPPER_HANDLE = `${NAMESPACE}-handle`;\nconst CROPPER_IMAGE = `${NAMESPACE}-image`;\nconst CROPPER_SELECTION = `${NAMESPACE}-selection`;\nconst CROPPER_SHADE = `${NAMESPACE}-shade`;\nconst CROPPER_VIEWER = `${NAMESPACE}-viewer`;\n// Actions\nconst ACTION_SELECT = 'select';\nconst ACTION_MOVE = 'move';\nconst ACTION_SCALE = 'scale';\nconst ACTION_ROTATE = 'rotate';\nconst ACTION_TRANSFORM = 'transform';\nconst ACTION_NONE = 'none';\nconst ACTION_RESIZE_NORTH = 'n-resize';\nconst ACTION_RESIZE_EAST = 'e-resize';\nconst ACTION_RESIZE_SOUTH = 's-resize';\nconst ACTION_RESIZE_WEST = 'w-resize';\nconst ACTION_RESIZE_NORTHEAST = 'ne-resize';\nconst ACTION_RESIZE_NORTHWEST = 'nw-resize';\nconst ACTION_RESIZE_SOUTHEAST = 'se-resize';\nconst ACTION_RESIZE_SOUTHWEST = 'sw-resize';\n// Attributes\nconst ATTRIBUTE_ACTION = 'action';\n// Native events\nconst EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\nconst EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\nconst EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\nconst EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\nconst EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\nconst EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\nconst EVENT_ERROR = 'error';\nconst EVENT_KEYDOWN = 'keydown';\nconst EVENT_LOAD = 'load';\nconst EVENT_RESIZE = 'resize';\nconst EVENT_WHEEL = 'wheel';\n// Custom events\nconst EVENT_ACTION = 'action';\nconst EVENT_ACTION_END = 'actionend';\nconst EVENT_ACTION_MOVE = 'actionmove';\nconst EVENT_ACTION_START = 'actionstart';\nconst EVENT_CHANGE = 'change';\nconst EVENT_TRANSFORM = 'transform';\n\n/**\n * Check if the given value is a string.\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n */\nfunction isString(value) {\n    return typeof value === 'string';\n}\n/**\n * Check if the given value is not a number.\n */\nconst isNaN = Number.isNaN || WINDOW.isNaN;\n/**\n * Check if the given value is a number.\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\nfunction isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n}\n/**\n * Check if the given value is a positive number.\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n */\nfunction isPositiveNumber(value) {\n    return isNumber(value) && value > 0 && value < Infinity;\n}\n/**\n * Check if the given value is undefined.\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\nfunction isUndefined(value) {\n    return typeof value === 'undefined';\n}\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\nfunction isObject(value) {\n    return typeof value === 'object' && value !== null;\n}\nconst { hasOwnProperty } = Object.prototype;\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\nfunction isPlainObject(value) {\n    if (!isObject(value)) {\n        return false;\n    }\n    try {\n        const { constructor } = value;\n        const { prototype } = constructor;\n        return constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    }\n    catch (error) {\n        return false;\n    }\n}\n/**\n * Check if the given value is a function.\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\n/**\n * Check if the given node is an element.\n * @param {*} node The node to check.\n * @returns {boolean} Returns `true` if the given node is an element; otherwise, `false`.\n */\nfunction isElement(node) {\n    return typeof node === 'object' && node !== null && node.nodeType === 1;\n}\nconst REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n/**\n * Transform the given string from camelCase to kebab-case.\n * @param {string} value The value to transform.\n * @returns {string} Returns the transformed value.\n */\nfunction toKebabCase(value) {\n    return String(value).replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n}\nconst REGEXP_KEBAB_CASE = /-[A-z\\d]/g;\n/**\n * Transform the given string from kebab-case to camelCase.\n * @param {string} value The value to transform.\n * @returns {string} Returns the transformed value.\n */\nfunction toCamelCase(value) {\n    return value.replace(REGEXP_KEBAB_CASE, (substring) => substring.slice(1).toUpperCase());\n}\nconst REGEXP_SPACES = /\\s\\s*/;\n/**\n * Remove event listener from the event target.\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener}\n * @param {EventTarget} target The target of the event.\n * @param {string} types The types of the event.\n * @param {EventListenerOrEventListenerObject} listener The listener of the event.\n * @param {EventListenerOptions} [options] The options specify characteristics about the event listener.\n */\nfunction off(target, types, listener, options) {\n    types.trim().split(REGEXP_SPACES).forEach((type) => {\n        target.removeEventListener(type, listener, options);\n    });\n}\n/**\n * Add event listener to the event target.\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener}\n * @param {EventTarget} target The target of the event.\n * @param {string} types The types of the event.\n * @param {EventListenerOrEventListenerObject} listener The listener of the event.\n * @param {AddEventListenerOptions} [options] The options specify characteristics about the event listener.\n */\nfunction on(target, types, listener, options) {\n    types.trim().split(REGEXP_SPACES).forEach((type) => {\n        target.addEventListener(type, listener, options);\n    });\n}\n/**\n * Add once event listener to the event target.\n * @param {EventTarget} target The target of the event.\n * @param {string} types The types of the event.\n * @param {EventListenerOrEventListenerObject} listener The listener of the event.\n * @param {AddEventListenerOptions} [options] The options specify characteristics about the event listener.\n */\nfunction once(target, types, listener, options) {\n    on(target, types, listener, Object.assign(Object.assign({}, options), { once: true }));\n}\nconst defaultEventOptions = {\n    bubbles: true,\n    cancelable: true,\n    composed: true,\n};\n/**\n * Dispatch event on the event target.\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent}\n * @param {EventTarget} target The target of the event.\n * @param {string} type The name of the event.\n * @param {*} [detail] The data passed when initializing the event.\n * @param {CustomEventInit} [options] The other event options.\n * @returns {boolean} Returns the result value.\n */\nfunction emit(target, type, detail, options) {\n    return target.dispatchEvent(new CustomEvent(type, Object.assign(Object.assign(Object.assign({}, defaultEventOptions), { detail }), options)));\n}\n/**\n * Get the real event target by checking composed path.\n * This is useful when dealing with events that can cross shadow DOM boundaries.\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/Event/composedPath}\n * @param {Event} event The event object.\n * @returns {EventTarget | null} The first element in the composed path, or the original event target.\n */\nfunction getComposedPathTarget(event) {\n    if (typeof event.composedPath === 'function') {\n        const path = event.composedPath();\n        return path.find(isElement) || event.target;\n    }\n    return event.target;\n}\nconst resolvedPromise = Promise.resolve();\n/**\n * Defers the callback to be executed after the next DOM update cycle.\n * @param {*} [context] The `this` context.\n * @param {Function} [callback] The callback to execute after the next DOM update cycle.\n * @returns {Promise} A promise that resolves to nothing.\n */\nfunction nextTick(context, callback) {\n    return callback\n        ? resolvedPromise.then(context ? callback.bind(context) : callback)\n        : resolvedPromise;\n}\n/**\n * Get the root document node.\n * @param {Element} element The target element.\n * @returns {Document|DocumentFragment|null} The document node.\n */\nfunction getRootDocument(element) {\n    const rootNode = element.getRootNode();\n    switch (rootNode.nodeType) {\n        case 1:\n            return rootNode.ownerDocument;\n        case 9:\n            return rootNode;\n        case 11:\n            return rootNode;\n    }\n    return null;\n}\n/**\n * Get the offset base on the document.\n * @param {Element} element The target element.\n * @returns {object} The offset data.\n */\nfunction getOffset(element) {\n    const { documentElement } = element.ownerDocument;\n    const box = element.getBoundingClientRect();\n    return {\n        left: box.left + (WINDOW.pageXOffset - documentElement.clientLeft),\n        top: box.top + (WINDOW.pageYOffset - documentElement.clientTop),\n    };\n}\nconst REGEXP_ANGLE_UNIT = /deg|g?rad|turn$/i;\n/**\n * Convert an angle to a radian number.\n * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/angle}\n * @param {number|string} angle The angle to convert.\n * @returns {number} Returns the radian number.\n */\nfunction toAngleInRadian(angle) {\n    const value = parseFloat(angle) || 0;\n    if (value !== 0) {\n        const [unit = 'rad'] = String(angle).match(REGEXP_ANGLE_UNIT) || [];\n        switch (unit.toLowerCase()) {\n            case 'deg':\n                return (value / 360) * (Math.PI * 2);\n            case 'grad':\n                return (value / 400) * (Math.PI * 2);\n            case 'turn':\n                return value * (Math.PI * 2);\n        }\n    }\n    return value;\n}\nconst SIZE_ADJUSTMENT_TYPE_CONTAIN = 'contain';\nconst SIZE_ADJUSTMENT_TYPE_COVER = 'cover';\n/**\n * Get the max sizes in a rectangle under the given aspect ratio.\n * @param {object} data The original sizes.\n * @param {string} [type] The adjust type.\n * @returns {object} Returns the result sizes.\n */\nfunction getAdjustedSizes(data, type = SIZE_ADJUSTMENT_TYPE_CONTAIN) {\n    const { aspectRatio } = data;\n    let { width, height } = data;\n    const isValidWidth = isPositiveNumber(width);\n    const isValidHeight = isPositiveNumber(height);\n    if (isValidWidth && isValidHeight) {\n        const adjustedWidth = height * aspectRatio;\n        if ((type === SIZE_ADJUSTMENT_TYPE_CONTAIN && adjustedWidth > width)\n            || (type === SIZE_ADJUSTMENT_TYPE_COVER && adjustedWidth < width)) {\n            height = width / aspectRatio;\n        }\n        else {\n            width = height * aspectRatio;\n        }\n    }\n    else if (isValidWidth) {\n        height = width / aspectRatio;\n    }\n    else if (isValidHeight) {\n        width = height * aspectRatio;\n    }\n    return {\n        width,\n        height,\n    };\n}\n/**\n * Multiply multiple matrices.\n * @param {Array} matrix The first matrix.\n * @param {Array} args The rest matrices.\n * @returns {Array} Returns the result matrix.\n */\nfunction multiplyMatrices(matrix, ...args) {\n    if (args.length === 0) {\n        return matrix;\n    }\n    const [a1, b1, c1, d1, e1, f1] = matrix;\n    const [a2, b2, c2, d2, e2, f2] = args[0];\n    //  a1 c1 e1     a2 c2 e2 \n    //  b1 d1 f1    b2 d2 f2 \n    //  0  0  1      0  0  1  \n    matrix = [\n        a1 * a2 + c1 * b2 /* + e1 * 0 */,\n        b1 * a2 + d1 * b2 /* + f1 * 0 */,\n        a1 * c2 + c1 * d2 /* + e1 * 0 */,\n        b1 * c2 + d1 * d2 /* + f1 * 0 */,\n        a1 * e2 + c1 * f2 + e1 /* * 1 */,\n        b1 * e2 + d1 * f2 + f1 /* * 1 */,\n    ];\n    return multiplyMatrices(matrix, ...args.slice(1));\n}\n\nexport { ACTION_MOVE, ACTION_NONE, ACTION_RESIZE_EAST, ACTION_RESIZE_NORTH, ACTION_RESIZE_NORTHEAST, ACTION_RESIZE_NORTHWEST, ACTION_RESIZE_SOUTH, ACTION_RESIZE_SOUTHEAST, ACTION_RESIZE_SOUTHWEST, ACTION_RESIZE_WEST, ACTION_ROTATE, ACTION_SCALE, ACTION_SELECT, ACTION_TRANSFORM, ATTRIBUTE_ACTION, CROPPER_CANVAS, CROPPER_CROSSHAIR, CROPPER_GIRD, CROPPER_HANDLE, CROPPER_IMAGE, CROPPER_SELECTION, CROPPER_SHADE, CROPPER_VIEWER, EVENT_ACTION, EVENT_ACTION_END, EVENT_ACTION_MOVE, EVENT_ACTION_START, EVENT_CHANGE, EVENT_ERROR, EVENT_KEYDOWN, EVENT_LOAD, EVENT_POINTER_DOWN, EVENT_POINTER_MOVE, EVENT_POINTER_UP, EVENT_RESIZE, EVENT_TOUCH_END, EVENT_TOUCH_MOVE, EVENT_TOUCH_START, EVENT_TRANSFORM, EVENT_WHEEL, HAS_POINTER_EVENT, IS_BROWSER, IS_TOUCH_DEVICE, NAMESPACE, WINDOW, emit, getAdjustedSizes, getComposedPathTarget, getOffset, getRootDocument, isElement, isFunction, isNaN, isNumber, isObject, isPlainObject, isPositiveNumber, isString, isUndefined, multiplyMatrices, nextTick, off, on, once, toAngleInRadian, toCamelCase, toKebabCase };\n","import { WINDOW, toCamelCase, toKebabCase, isNaN, isUndefined, isNumber, emit, nextTick, isObject, IS_BROWSER } from '@cropper/utils';\n\nvar style = `:host([hidden]){display:none!important}`;\n\nconst REGEXP_SUFFIX = /left|top|width|height/i;\nconst DEFAULT_SHADOW_ROOT_MODE = 'open';\nconst shadowRoots = new WeakMap();\nconst styleSheets = new WeakMap();\nconst tagNames = new Map();\nconst supportsAdoptedStyleSheets = WINDOW.document && Array.isArray(WINDOW.document.adoptedStyleSheets) && 'replaceSync' in WINDOW.CSSStyleSheet.prototype;\nclass CropperElement extends HTMLElement {\n    get $sharedStyle() {\n        return `${this.themeColor ? `:host{--theme-color: ${this.themeColor};}` : ''}${style}`;\n    }\n    constructor() {\n        var _a, _b;\n        super();\n        this.shadowRootMode = DEFAULT_SHADOW_ROOT_MODE;\n        this.slottable = true;\n        const name = (_b = (_a = Object.getPrototypeOf(this)) === null || _a === void 0 ? void 0 : _a.constructor) === null || _b === void 0 ? void 0 : _b.$name;\n        if (name) {\n            tagNames.set(name, this.tagName.toLowerCase());\n        }\n    }\n    static get observedAttributes() {\n        return [\n            'shadow-root-mode',\n            'slottable',\n            'theme-color',\n        ];\n    }\n    // Convert attribute to property\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (Object.is(newValue, oldValue)) {\n            return;\n        }\n        const propertyName = toCamelCase(name);\n        const oldPropertyValue = this[propertyName];\n        let newPropertyValue = newValue;\n        switch (typeof oldPropertyValue) {\n            case 'boolean':\n                newPropertyValue = newValue !== null && newValue !== 'false';\n                break;\n            case 'number':\n                newPropertyValue = Number(newValue);\n                break;\n        }\n        this[propertyName] = newPropertyValue;\n        switch (name) {\n            case 'theme-color': {\n                const styleSheet = styleSheets.get(this);\n                const styles = this.$sharedStyle;\n                if (styleSheet && styles) {\n                    if (supportsAdoptedStyleSheets) {\n                        styleSheet.replaceSync(styles);\n                    }\n                    else {\n                        styleSheet.textContent = styles;\n                    }\n                }\n                break;\n            }\n        }\n    }\n    // Convert property to attribute\n    $propertyChangedCallback(name, oldValue, newValue) {\n        if (Object.is(newValue, oldValue)) {\n            return;\n        }\n        name = toKebabCase(name);\n        switch (typeof newValue) {\n            case 'boolean':\n                if (newValue === true) {\n                    if (!this.hasAttribute(name)) {\n                        this.setAttribute(name, '');\n                    }\n                }\n                else {\n                    this.removeAttribute(name);\n                }\n                break;\n            case 'number':\n                if (isNaN(newValue)) {\n                    newValue = '';\n                }\n                else {\n                    newValue = String(newValue);\n                }\n            // Fall through\n            // case 'string':\n            // eslint-disable-next-line no-fallthrough\n            default:\n                if (newValue) {\n                    if (this.getAttribute(name) !== newValue) {\n                        this.setAttribute(name, newValue);\n                    }\n                }\n                else {\n                    this.removeAttribute(name);\n                }\n        }\n    }\n    connectedCallback() {\n        // Observe properties after observed attributes\n        Object.getPrototypeOf(this).constructor.observedAttributes.forEach((attribute) => {\n            const property = toCamelCase(attribute);\n            let value = this[property];\n            if (!isUndefined(value)) {\n                this.$propertyChangedCallback(property, undefined, value);\n            }\n            Object.defineProperty(this, property, {\n                enumerable: true,\n                configurable: true,\n                get() {\n                    return value;\n                },\n                set(newValue) {\n                    const oldValue = value;\n                    value = newValue;\n                    this.$propertyChangedCallback(property, oldValue, newValue);\n                },\n            });\n        });\n        const shadow = this.shadowRoot || this.attachShadow({\n            mode: this.shadowRootMode || DEFAULT_SHADOW_ROOT_MODE,\n        });\n        shadowRoots.set(this, shadow);\n        styleSheets.set(this, this.$addStyles(this.$sharedStyle));\n        if (this.$style) {\n            this.$addStyles(this.$style);\n        }\n        if (this.$template) {\n            const template = document.createElement('template');\n            template.innerHTML = this.$template;\n            shadow.appendChild(template.content);\n        }\n        if (this.slottable) {\n            const slot = document.createElement('slot');\n            shadow.appendChild(slot);\n        }\n    }\n    disconnectedCallback() {\n        if (styleSheets.has(this)) {\n            styleSheets.delete(this);\n        }\n        if (shadowRoots.has(this)) {\n            shadowRoots.delete(this);\n        }\n    }\n    // eslint-disable-next-line class-methods-use-this\n    $getTagNameOf(name) {\n        var _a;\n        return (_a = tagNames.get(name)) !== null && _a !== void 0 ? _a : name;\n    }\n    $setStyles(properties) {\n        Object.keys(properties).forEach((property) => {\n            let value = properties[property];\n            if (isNumber(value)) {\n                if (value !== 0 && REGEXP_SUFFIX.test(property)) {\n                    value = `${value}px`;\n                }\n                else {\n                    value = String(value);\n                }\n            }\n            this.style[property] = value;\n        });\n        return this;\n    }\n    /**\n     * Outputs the shadow root of the element.\n     * @returns {ShadowRoot} Returns the shadow root.\n     */\n    $getShadowRoot() {\n        return this.shadowRoot || shadowRoots.get(this);\n    }\n    /**\n     * Adds styles to the shadow root.\n     * @param {string} styles The styles to add.\n     * @returns {CSSStyleSheet|HTMLStyleElement} Returns the generated style sheet.\n     */\n    $addStyles(styles) {\n        let styleSheet;\n        const shadow = this.$getShadowRoot();\n        if (supportsAdoptedStyleSheets) {\n            styleSheet = new CSSStyleSheet();\n            styleSheet.replaceSync(styles);\n            shadow.adoptedStyleSheets = shadow.adoptedStyleSheets.concat(styleSheet);\n        }\n        else {\n            styleSheet = document.createElement('style');\n            styleSheet.textContent = styles;\n            shadow.appendChild(styleSheet);\n        }\n        return styleSheet;\n    }\n    /**\n     * Dispatches an event at the element.\n     * @param {string} type The name of the event.\n     * @param {*} [detail] The data passed when initializing the event.\n     * @param {CustomEventInit} [options] The other event options.\n     * @returns {boolean} Returns the result value.\n     */\n    $emit(type, detail, options) {\n        return emit(this, type, detail, options);\n    }\n    /**\n     * Defers the callback to be executed after the next DOM update cycle.\n     * @param {Function} [callback] The callback to execute after the next DOM update cycle.\n     * @returns {Promise} A promise that resolves to nothing.\n     */\n    $nextTick(callback) {\n        return nextTick(this, callback);\n    }\n    /**\n     * Defines the constructor as a new custom element.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/define}\n     * @param {string|object} [name] The element name.\n     * @param {object} [options] The element definition options.\n     */\n    static $define(name, options) {\n        if (isObject(name)) {\n            options = name;\n            name = '';\n        }\n        if (!name) {\n            name = this.$name || this.name;\n        }\n        name = toKebabCase(name);\n        if (IS_BROWSER && WINDOW.customElements && !WINDOW.customElements.get(name)) {\n            customElements.define(name, this, options);\n        }\n    }\n}\nCropperElement.$version = '2.1.0';\n\nexport { CropperElement as default };\n","import CropperElement from '@cropper/element';\nimport { CROPPER_CANVAS, ACTION_NONE, on, EVENT_POINTER_DOWN, EVENT_POINTER_MOVE, EVENT_POINTER_UP, EVENT_WHEEL, off, isNumber, isElement, ATTRIBUTE_ACTION, EVENT_ACTION_START, EVENT_ACTION_MOVE, ACTION_TRANSFORM, EVENT_ACTION, EVENT_ACTION_END, ACTION_SCALE, isString, isPlainObject, isPositiveNumber, getAdjustedSizes, CROPPER_IMAGE, isFunction, ACTION_ROTATE } from '@cropper/utils';\n\nvar style = `:host{display:block;min-height:100px;min-width:200px;overflow:hidden;position:relative;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([background]){background-color:#fff;background-image:repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc),repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc);background-image:repeating-conic-gradient(#ccc 0 25%,#fff 0 50%);background-position:0 0,.5rem .5rem;background-size:1rem 1rem}:host([disabled]){pointer-events:none}:host([disabled]):after{bottom:0;content:\"\";cursor:not-allowed;display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}`;\n\nclass CropperCanvas extends CropperElement {\n    constructor() {\n        super(...arguments);\n        this.$onPointerDown = null;\n        this.$onPointerMove = null;\n        this.$onPointerUp = null;\n        this.$onWheel = null;\n        this.$wheeling = false;\n        this.$pointers = new Map();\n        this.$style = style;\n        this.$action = ACTION_NONE;\n        this.background = false;\n        this.disabled = false;\n        this.scaleStep = 0.1;\n        this.themeColor = '#39f';\n    }\n    static get observedAttributes() {\n        return super.observedAttributes.concat([\n            'background',\n            'disabled',\n            'scale-step',\n        ]);\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        if (!this.disabled) {\n            this.$bind();\n        }\n    }\n    disconnectedCallback() {\n        if (!this.disabled) {\n            this.$unbind();\n        }\n        super.disconnectedCallback();\n    }\n    $propertyChangedCallback(name, oldValue, newValue) {\n        if (Object.is(newValue, oldValue)) {\n            return;\n        }\n        super.$propertyChangedCallback(name, oldValue, newValue);\n        switch (name) {\n            case 'disabled':\n                if (newValue) {\n                    this.$unbind();\n                }\n                else {\n                    this.$bind();\n                }\n                break;\n        }\n    }\n    $bind() {\n        if (!this.$onPointerDown) {\n            this.$onPointerDown = this.$handlePointerDown.bind(this);\n            on(this, EVENT_POINTER_DOWN, this.$onPointerDown);\n        }\n        if (!this.$onPointerMove) {\n            this.$onPointerMove = this.$handlePointerMove.bind(this);\n            on(this.ownerDocument, EVENT_POINTER_MOVE, this.$onPointerMove);\n        }\n        if (!this.$onPointerUp) {\n            this.$onPointerUp = this.$handlePointerUp.bind(this);\n            on(this.ownerDocument, EVENT_POINTER_UP, this.$onPointerUp);\n        }\n        if (!this.$onWheel) {\n            this.$onWheel = this.$handleWheel.bind(this);\n            on(this, EVENT_WHEEL, this.$onWheel, {\n                passive: false,\n                capture: true,\n            });\n        }\n    }\n    $unbind() {\n        if (this.$onPointerDown) {\n            off(this, EVENT_POINTER_DOWN, this.$onPointerDown);\n            this.$onPointerDown = null;\n        }\n        if (this.$onPointerMove) {\n            off(this.ownerDocument, EVENT_POINTER_MOVE, this.$onPointerMove);\n            this.$onPointerMove = null;\n        }\n        if (this.$onPointerUp) {\n            off(this.ownerDocument, EVENT_POINTER_UP, this.$onPointerUp);\n            this.$onPointerUp = null;\n        }\n        if (this.$onWheel) {\n            off(this, EVENT_WHEEL, this.$onWheel, {\n                capture: true,\n            });\n            this.$onWheel = null;\n        }\n    }\n    $handlePointerDown(event) {\n        const { buttons, button, type } = event;\n        if (this.disabled || (\n        // Handle pointer or mouse event, and ignore touch event\n        ((type === 'pointerdown' && event.pointerType === 'mouse') || type === 'mousedown') && (\n        // No primary button (Usually the left button)\n        (isNumber(buttons) && buttons !== 1) || (isNumber(button) && button !== 0)\n            // Open context menu\n            || event.ctrlKey))) {\n            return;\n        }\n        const { $pointers } = this;\n        let action = '';\n        if (event.changedTouches) {\n            Array.from(event.changedTouches).forEach(({ identifier, pageX, pageY, }) => {\n                $pointers.set(identifier, {\n                    startX: pageX,\n                    startY: pageY,\n                    endX: pageX,\n                    endY: pageY,\n                });\n            });\n        }\n        else {\n            const { pointerId = 0, pageX, pageY } = event;\n            $pointers.set(pointerId, {\n                startX: pageX,\n                startY: pageY,\n                endX: pageX,\n                endY: pageY,\n            });\n        }\n        if ($pointers.size > 1) {\n            action = ACTION_TRANSFORM;\n        }\n        else if (isElement(event.target)) {\n            action = event.target.action || event.target.getAttribute(ATTRIBUTE_ACTION) || '';\n        }\n        if (this.$emit(EVENT_ACTION_START, {\n            action,\n            relatedEvent: event,\n        }) === false) {\n            return;\n        }\n        // Prevent page zooming in the browsers for iOS.\n        event.preventDefault();\n        this.$action = action;\n        this.style.willChange = 'transform';\n    }\n    $handlePointerMove(event) {\n        const { $action, $pointers } = this;\n        if (this.disabled || $action === ACTION_NONE || $pointers.size === 0) {\n            return;\n        }\n        if (this.$emit(EVENT_ACTION_MOVE, {\n            action: $action,\n            relatedEvent: event,\n        }) === false) {\n            return;\n        }\n        // Prevent page scrolling.\n        event.preventDefault();\n        if (event.changedTouches) {\n            Array.from(event.changedTouches).forEach(({ identifier, pageX, pageY, }) => {\n                const pointer = $pointers.get(identifier);\n                if (pointer) {\n                    Object.assign(pointer, {\n                        endX: pageX,\n                        endY: pageY,\n                    });\n                }\n            });\n        }\n        else {\n            const { pointerId = 0, pageX, pageY } = event;\n            const pointer = $pointers.get(pointerId);\n            if (pointer) {\n                Object.assign(pointer, {\n                    endX: pageX,\n                    endY: pageY,\n                });\n            }\n        }\n        const detail = {\n            action: $action,\n            relatedEvent: event,\n        };\n        if ($action === ACTION_TRANSFORM) {\n            const pointers2 = new Map($pointers);\n            let maxRotateRate = 0;\n            let maxScaleRate = 0;\n            let rotate = 0;\n            let scale = 0;\n            let centerX = event.pageX;\n            let centerY = event.pageY;\n            $pointers.forEach((pointer, pointerId) => {\n                pointers2.delete(pointerId);\n                pointers2.forEach((pointer2) => {\n                    let x1 = pointer2.startX - pointer.startX;\n                    let y1 = pointer2.startY - pointer.startY;\n                    let x2 = pointer2.endX - pointer.endX;\n                    let y2 = pointer2.endY - pointer.endY;\n                    let z1 = 0;\n                    let z2 = 0;\n                    let a1 = 0;\n                    let a2 = 0;\n                    if (x1 === 0) {\n                        if (y1 < 0) {\n                            a1 = Math.PI * 2;\n                        }\n                        else if (y1 > 0) {\n                            a1 = Math.PI;\n                        }\n                    }\n                    else if (x1 > 0) {\n                        a1 = (Math.PI / 2) + Math.atan(y1 / x1);\n                    }\n                    else if (x1 < 0) {\n                        a1 = (Math.PI * 1.5) + Math.atan(y1 / x1);\n                    }\n                    if (x2 === 0) {\n                        if (y2 < 0) {\n                            a2 = Math.PI * 2;\n                        }\n                        else if (y2 > 0) {\n                            a2 = Math.PI;\n                        }\n                    }\n                    else if (x2 > 0) {\n                        a2 = (Math.PI / 2) + Math.atan(y2 / x2);\n                    }\n                    else if (x2 < 0) {\n                        a2 = (Math.PI * 1.5) + Math.atan(y2 / x2);\n                    }\n                    if (a2 > 0 || a1 > 0) {\n                        const rotateRate = a2 - a1;\n                        const absRotateRate = Math.abs(rotateRate);\n                        if (absRotateRate > maxRotateRate) {\n                            maxRotateRate = absRotateRate;\n                            rotate = rotateRate;\n                            centerX = (pointer.startX + pointer2.startX) / 2;\n                            centerY = (pointer.startY + pointer2.startY) / 2;\n                        }\n                    }\n                    x1 = Math.abs(x1);\n                    y1 = Math.abs(y1);\n                    x2 = Math.abs(x2);\n                    y2 = Math.abs(y2);\n                    if (x1 > 0 && y1 > 0) {\n                        z1 = Math.sqrt((x1 * x1) + (y1 * y1));\n                    }\n                    else if (x1 > 0) {\n                        z1 = x1;\n                    }\n                    else if (y1 > 0) {\n                        z1 = y1;\n                    }\n                    if (x2 > 0 && y2 > 0) {\n                        z2 = Math.sqrt((x2 * x2) + (y2 * y2));\n                    }\n                    else if (x2 > 0) {\n                        z2 = x2;\n                    }\n                    else if (y2 > 0) {\n                        z2 = y2;\n                    }\n                    if (z1 > 0 && z2 > 0) {\n                        const scaleRate = (z2 - z1) / z1;\n                        const absScaleRate = Math.abs(scaleRate);\n                        if (absScaleRate > maxScaleRate) {\n                            maxScaleRate = absScaleRate;\n                            scale = scaleRate;\n                            centerX = (pointer.startX + pointer2.startX) / 2;\n                            centerY = (pointer.startY + pointer2.startY) / 2;\n                        }\n                    }\n                });\n            });\n            const rotatable = maxRotateRate > 0;\n            const scalable = maxScaleRate > 0;\n            if (rotatable && scalable) {\n                detail.rotate = rotate;\n                detail.scale = scale;\n                detail.centerX = centerX;\n                detail.centerY = centerY;\n            }\n            else if (rotatable) {\n                detail.action = ACTION_ROTATE;\n                detail.rotate = rotate;\n                detail.centerX = centerX;\n                detail.centerY = centerY;\n            }\n            else if (scalable) {\n                detail.action = ACTION_SCALE;\n                detail.scale = scale;\n                detail.centerX = centerX;\n                detail.centerY = centerY;\n            }\n            else {\n                detail.action = ACTION_NONE;\n            }\n        }\n        else {\n            const [pointer] = Array.from($pointers.values());\n            Object.assign(detail, pointer);\n        }\n        // Override the starting coordinate\n        $pointers.forEach((pointer) => {\n            pointer.startX = pointer.endX;\n            pointer.startY = pointer.endY;\n        });\n        if (detail.action !== ACTION_NONE) {\n            this.$emit(EVENT_ACTION, detail, {\n                cancelable: false,\n            });\n        }\n    }\n    $handlePointerUp(event) {\n        const { $action, $pointers } = this;\n        if (this.disabled || $action === ACTION_NONE) {\n            return;\n        }\n        if (this.$emit(EVENT_ACTION_END, {\n            action: $action,\n            relatedEvent: event,\n        }) === false) {\n            return;\n        }\n        event.preventDefault();\n        if (event.changedTouches) {\n            Array.from(event.changedTouches).forEach(({ identifier, }) => {\n                $pointers.delete(identifier);\n            });\n        }\n        else {\n            const { pointerId = 0 } = event;\n            $pointers.delete(pointerId);\n        }\n        if ($pointers.size === 0) {\n            this.style.willChange = '';\n            this.$action = ACTION_NONE;\n        }\n    }\n    $handleWheel(event) {\n        if (this.disabled) {\n            return;\n        }\n        event.preventDefault();\n        // Limit wheel speed to prevent zoom too fast (#21)\n        if (this.$wheeling) {\n            return;\n        }\n        this.$wheeling = true;\n        // Debounce by 50ms\n        setTimeout(() => {\n            this.$wheeling = false;\n        }, 50);\n        const delta = event.deltaY > 0 ? -1 : 1;\n        const scale = delta * this.scaleStep;\n        this.$emit(EVENT_ACTION, {\n            action: ACTION_SCALE,\n            scale,\n            relatedEvent: event,\n        }, {\n            cancelable: false,\n        });\n    }\n    /**\n     * Changes the current action to a new one.\n     * @param {string} action The new action.\n     * @returns {CropperCanvas} Returns `this` for chaining.\n     */\n    $setAction(action) {\n        if (isString(action)) {\n            this.$action = action;\n        }\n        return this;\n    }\n    /**\n     * Generates a real canvas element, with the image draw into if there is one.\n     * @param {object} [options] The available options.\n     * @param {number} [options.width] The width of the canvas.\n     * @param {number} [options.height] The height of the canvas.\n     * @param {Function} [options.beforeDraw] The function called before drawing the image onto the canvas.\n     * @returns {Promise} Returns a promise that resolves to the generated canvas element.\n     */\n    $toCanvas(options) {\n        return new Promise((resolve, reject) => {\n            if (!this.isConnected) {\n                reject(new Error('The current element is not connected to the DOM.'));\n                return;\n            }\n            const canvas = document.createElement('canvas');\n            let width = this.offsetWidth;\n            let height = this.offsetHeight;\n            let scale = 1;\n            if (isPlainObject(options)\n                && (isPositiveNumber(options.width) || isPositiveNumber(options.height))) {\n                ({ width, height } = getAdjustedSizes({\n                    aspectRatio: width / height,\n                    width: options.width,\n                    height: options.height,\n                }));\n                scale = width / this.offsetWidth;\n            }\n            canvas.width = width;\n            canvas.height = height;\n            const cropperImage = this.querySelector(this.$getTagNameOf(CROPPER_IMAGE));\n            if (!cropperImage) {\n                resolve(canvas);\n                return;\n            }\n            cropperImage.$ready().then((image) => {\n                const context = canvas.getContext('2d');\n                if (context) {\n                    const [a, b, c, d, e, f] = cropperImage.$getTransform();\n                    let newE = e;\n                    let newF = f;\n                    let destWidth = image.naturalWidth;\n                    let destHeight = image.naturalHeight;\n                    if (scale !== 1) {\n                        newE *= scale;\n                        newF *= scale;\n                        destWidth *= scale;\n                        destHeight *= scale;\n                    }\n                    const centerX = destWidth / 2;\n                    const centerY = destHeight / 2;\n                    context.fillStyle = 'transparent';\n                    context.fillRect(0, 0, width, height);\n                    if (isPlainObject(options) && isFunction(options.beforeDraw)) {\n                        options.beforeDraw.call(this, context, canvas);\n                    }\n                    context.save();\n                    // Move the transform origin to the center of the image.\n                    // https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin\n                    context.translate(centerX, centerY);\n                    context.transform(a, b, c, d, newE, newF);\n                    // Reset the transform origin to the top-left of the image.\n                    context.translate(-centerX, -centerY);\n                    context.drawImage(image, 0, 0, destWidth, destHeight);\n                    context.restore();\n                }\n                resolve(canvas);\n            }).catch(reject);\n        });\n    }\n}\nCropperCanvas.$name = CROPPER_CANVAS;\nCropperCanvas.$version = '2.1.0';\n\nexport { CropperCanvas as default };\n","import CropperElement from '@cropper/element';\nimport { CROPPER_IMAGE, CROPPER_CANVAS, on, EVENT_ACTION_START, EVENT_ACTION_END, EVENT_ACTION, EVENT_LOAD, off, ACTION_TRANSFORM, ACTION_ROTATE, ACTION_SCALE, ACTION_NONE, CROPPER_SELECTION, ACTION_MOVE, once, EVENT_ERROR, isFunction, isNumber, toAngleInRadian, multiplyMatrices, EVENT_TRANSFORM } from '@cropper/utils';\n\nvar style = `:host{display:inline-block}img{display:block;height:100%;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}`;\n\nconst canvasCache = new WeakMap();\nconst NATIVE_ATTRIBUTES = [\n    'alt',\n    'crossorigin',\n    'decoding',\n    'elementtiming',\n    'fetchpriority',\n    'loading',\n    'referrerpolicy',\n    'sizes',\n    'src',\n    'srcset',\n];\nclass CropperImage extends CropperElement {\n    constructor() {\n        super(...arguments);\n        this.$matrix = [1, 0, 0, 1, 0, 0];\n        this.$onLoad = null;\n        this.$onCanvasAction = null;\n        this.$onCanvasActionEnd = null;\n        this.$onCanvasActionStart = null;\n        this.$actionStartTarget = null;\n        this.$style = style;\n        this.$image = new Image();\n        this.initialCenterSize = 'contain';\n        this.rotatable = false;\n        this.scalable = false;\n        this.skewable = false;\n        this.slottable = false;\n        this.translatable = false;\n        // Native attributes\n        this.alt = '';\n        this.crossorigin = '';\n        this.decoding = '';\n        this.elementtiming = '';\n        this.fetchpriority = '';\n        this.loading = '';\n        this.referrerpolicy = '';\n        this.sizes = '';\n        this.src = '';\n        this.srcset = '';\n    }\n    set $canvas(element) {\n        canvasCache.set(this, element);\n    }\n    get $canvas() {\n        return canvasCache.get(this);\n    }\n    static get observedAttributes() {\n        return super.observedAttributes.concat(NATIVE_ATTRIBUTES, [\n            'initial-center-size',\n            'rotatable',\n            'scalable',\n            'skewable',\n            'translatable',\n        ]);\n    }\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (Object.is(newValue, oldValue)) {\n            return;\n        }\n        super.attributeChangedCallback(name, oldValue, newValue);\n        // Inherits the native attributes\n        if (NATIVE_ATTRIBUTES.includes(name)) {\n            this.$image.setAttribute(name, newValue);\n        }\n    }\n    $propertyChangedCallback(name, oldValue, newValue) {\n        if (Object.is(newValue, oldValue)) {\n            return;\n        }\n        super.$propertyChangedCallback(name, oldValue, newValue);\n        switch (name) {\n            case 'initialCenterSize':\n                this.$nextTick(() => {\n                    this.$center(newValue);\n                });\n                break;\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        const { $image } = this;\n        const $canvas = this.closest(this.$getTagNameOf(CROPPER_CANVAS));\n        if ($canvas) {\n            this.$canvas = $canvas;\n            this.$setStyles({\n                // Make it a block element to avoid side effects (#1074).\n                display: 'block',\n                position: 'absolute',\n            });\n            this.$onCanvasActionStart = (event) => {\n                var _a, _b;\n                this.$actionStartTarget = (_b = (_a = event.detail) === null || _a === void 0 ? void 0 : _a.relatedEvent) === null || _b === void 0 ? void 0 : _b.target;\n            };\n            this.$onCanvasActionEnd = () => {\n                this.$actionStartTarget = null;\n            };\n            this.$onCanvasAction = this.$handleAction.bind(this);\n            on($canvas, EVENT_ACTION_START, this.$onCanvasActionStart);\n            on($canvas, EVENT_ACTION_END, this.$onCanvasActionEnd);\n            on($canvas, EVENT_ACTION, this.$onCanvasAction);\n        }\n        this.$onLoad = this.$handleLoad.bind(this);\n        on($image, EVENT_LOAD, this.$onLoad);\n        this.$getShadowRoot().appendChild($image);\n    }\n    disconnectedCallback() {\n        const { $image, $canvas } = this;\n        if ($canvas) {\n            if (this.$onCanvasActionStart) {\n                off($canvas, EVENT_ACTION_START, this.$onCanvasActionStart);\n                this.$onCanvasActionStart = null;\n            }\n            if (this.$onCanvasActionEnd) {\n                off($canvas, EVENT_ACTION_END, this.$onCanvasActionEnd);\n                this.$onCanvasActionEnd = null;\n            }\n            if (this.$onCanvasAction) {\n                off($canvas, EVENT_ACTION, this.$onCanvasAction);\n                this.$onCanvasAction = null;\n            }\n        }\n        if ($image && this.$onLoad) {\n            off($image, EVENT_LOAD, this.$onLoad);\n            this.$onLoad = null;\n        }\n        this.$getShadowRoot().removeChild($image);\n        super.disconnectedCallback();\n    }\n    $handleLoad() {\n        const { $image } = this;\n        this.$setStyles({\n            width: $image.naturalWidth,\n            height: $image.naturalHeight,\n        });\n        if (this.$canvas) {\n            this.$center(this.initialCenterSize);\n        }\n    }\n    $handleAction(event) {\n        if (this.hidden || !(this.rotatable || this.scalable || this.translatable)) {\n            return;\n        }\n        const { $canvas } = this;\n        const { detail } = event;\n        if (detail) {\n            const { relatedEvent } = detail;\n            let { action } = detail;\n            if (action === ACTION_TRANSFORM && (!this.rotatable || !this.scalable)) {\n                if (this.rotatable) {\n                    action = ACTION_ROTATE;\n                }\n                else if (this.scalable) {\n                    action = ACTION_SCALE;\n                }\n                else {\n                    action = ACTION_NONE;\n                }\n            }\n            switch (action) {\n                case ACTION_MOVE:\n                    if (this.translatable) {\n                        let $selection = null;\n                        if (relatedEvent) {\n                            $selection = relatedEvent.target.closest(this.$getTagNameOf(CROPPER_SELECTION));\n                        }\n                        if (!$selection) {\n                            $selection = $canvas.querySelector(this.$getTagNameOf(CROPPER_SELECTION));\n                        }\n                        if ($selection && $selection.multiple && !$selection.active) {\n                            $selection = $canvas.querySelector(`${this.$getTagNameOf(CROPPER_SELECTION)}[active]`);\n                        }\n                        if (!$selection || $selection.hidden || !$selection.movable || $selection.dynamic\n                            || !(this.$actionStartTarget && $selection.contains(this.$actionStartTarget))) {\n                            this.$move(detail.endX - detail.startX, detail.endY - detail.startY);\n                        }\n                    }\n                    break;\n                case ACTION_ROTATE:\n                    if (this.rotatable) {\n                        if (relatedEvent) {\n                            const { x, y } = this.getBoundingClientRect();\n                            this.$rotate(detail.rotate, relatedEvent.clientX - x, relatedEvent.clientY - y);\n                        }\n                        else {\n                            this.$rotate(detail.rotate);\n                        }\n                    }\n                    break;\n                case ACTION_SCALE:\n                    if (this.scalable) {\n                        if (relatedEvent) {\n                            const $selection = relatedEvent.target.closest(this.$getTagNameOf(CROPPER_SELECTION));\n                            if (!$selection\n                                || !$selection.zoomable\n                                || ($selection.zoomable && $selection.dynamic)) {\n                                const { x, y } = this.getBoundingClientRect();\n                                this.$zoom(detail.scale, relatedEvent.clientX - x, relatedEvent.clientY - y);\n                            }\n                        }\n                        else {\n                            this.$zoom(detail.scale);\n                        }\n                    }\n                    break;\n                case ACTION_TRANSFORM:\n                    if (this.rotatable && this.scalable) {\n                        const { rotate } = detail;\n                        let { scale } = detail;\n                        if (scale < 0) {\n                            scale = 1 / (1 - scale);\n                        }\n                        else {\n                            scale += 1;\n                        }\n                        const cos = Math.cos(rotate);\n                        const sin = Math.sin(rotate);\n                        const [scaleX, skewY, skewX, scaleY] = [\n                            cos * scale,\n                            sin * scale,\n                            -sin * scale,\n                            cos * scale,\n                        ];\n                        if (relatedEvent) {\n                            const clientRect = this.getBoundingClientRect();\n                            const x = relatedEvent.clientX - clientRect.x;\n                            const y = relatedEvent.clientY - clientRect.y;\n                            const [a, b, c, d] = this.$matrix;\n                            const originX = clientRect.width / 2;\n                            const originY = clientRect.height / 2;\n                            const moveX = x - originX;\n                            const moveY = y - originY;\n                            const translateX = ((moveX * d) - (c * moveY)) / ((a * d) - (c * b));\n                            const translateY = ((moveY * a) - (b * moveX)) / ((a * d) - (c * b));\n                            /**\n                             * Equals to\n                             * this.$rotate(rotate, x, y);\n                             * this.$scale(scale, x, y);\n                             */\n                            this.$transform(scaleX, skewY, skewX, scaleY, translateX * (1 - scaleX) + translateY * skewX, translateY * (1 - scaleY) + translateX * skewY);\n                        }\n                        else {\n                            /**\n                             * Equals to\n                             * this.$rotate(rotate);\n                             * this.$scale(scale);\n                             */\n                            this.$transform(scaleX, skewY, skewX, scaleY, 0, 0);\n                        }\n                    }\n                    break;\n            }\n        }\n    }\n    /**\n     * Defers the callback to execute after successfully loading the image.\n     * @param {Function} [callback] The callback to execute after successfully loading the image.\n     * @returns {Promise} Returns a promise that resolves to the image element.\n     */\n    $ready(callback) {\n        const { $image } = this;\n        const promise = new Promise((resolve, reject) => {\n            const error = new Error('Failed to load the image source');\n            if ($image.complete) {\n                if ($image.naturalWidth > 0 && $image.naturalHeight > 0) {\n                    resolve($image);\n                }\n                else {\n                    reject(error);\n                }\n            }\n            else {\n                const onLoad = () => {\n                    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                    off($image, EVENT_ERROR, onError);\n                    // Ensure the image is fully rendered.\n                    setTimeout(() => {\n                        resolve($image);\n                    });\n                };\n                const onError = () => {\n                    off($image, EVENT_LOAD, onLoad);\n                    reject(error);\n                };\n                once($image, EVENT_LOAD, onLoad);\n                once($image, EVENT_ERROR, onError);\n            }\n        });\n        if (isFunction(callback)) {\n            promise.then((image) => {\n                callback(image);\n                return image;\n            });\n        }\n        return promise;\n    }\n    /**\n     * Aligns the image to the center of its parent element.\n     * @param {string} [size] The size of the image.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $center(size) {\n        const { parentElement } = this;\n        if (!parentElement) {\n            return this;\n        }\n        const container = parentElement.getBoundingClientRect();\n        const containerWidth = container.width;\n        const containerHeight = container.height;\n        const { x, y, width, height, } = this.getBoundingClientRect();\n        const startX = x + (width / 2);\n        const startY = y + (height / 2);\n        const endX = container.x + (containerWidth / 2);\n        const endY = container.y + (containerHeight / 2);\n        this.$move(endX - startX, endY - startY);\n        if (size && (width !== containerWidth || height !== containerHeight)) {\n            const scaleX = containerWidth / width;\n            const scaleY = containerHeight / height;\n            switch (size) {\n                case 'cover':\n                    this.$scale(Math.max(scaleX, scaleY));\n                    break;\n                case 'contain':\n                    this.$scale(Math.min(scaleX, scaleY));\n                    break;\n            }\n        }\n        return this;\n    }\n    /**\n     * Moves the image.\n     * @param {number} x The moving distance in the horizontal direction.\n     * @param {number} [y] The moving distance in the vertical direction.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $move(x, y = x) {\n        if (this.translatable && isNumber(x) && isNumber(y)) {\n            const [a, b, c, d] = this.$matrix;\n            const e = ((x * d) - (c * y)) / ((a * d) - (c * b));\n            const f = ((y * a) - (b * x)) / ((a * d) - (c * b));\n            this.$translate(e, f);\n        }\n        return this;\n    }\n    /**\n     * Moves the image to a specific position.\n     * @param {number} x The new position in the horizontal direction.\n     * @param {number} [y] The new position in the vertical direction.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $moveTo(x, y = x) {\n        if (this.translatable && isNumber(x) && isNumber(y)) {\n            const [a, b, c, d] = this.$matrix;\n            const e = ((x * d) - (c * y)) / ((a * d) - (c * b));\n            const f = ((y * a) - (b * x)) / ((a * d) - (c * b));\n            this.$setTransform(a, b, c, d, e, f);\n        }\n        return this;\n    }\n    /**\n     * Rotates the image.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/rotate}\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/rotate}\n     * @param {number|string} angle The rotation angle (in radians).\n     * @param {number} [x] The rotation origin in the horizontal, defaults to the center of the image.\n     * @param {number} [y] The rotation origin in the vertical, defaults to the center of the image.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $rotate(angle, x, y) {\n        if (this.rotatable) {\n            const radian = toAngleInRadian(angle);\n            const cos = Math.cos(radian);\n            const sin = Math.sin(radian);\n            const [scaleX, skewY, skewX, scaleY] = [cos, sin, -sin, cos];\n            if (isNumber(x) && isNumber(y)) {\n                const [a, b, c, d] = this.$matrix;\n                const { width, height } = this.getBoundingClientRect();\n                const originX = width / 2;\n                const originY = height / 2;\n                const moveX = x - originX;\n                const moveY = y - originY;\n                const translateX = ((moveX * d) - (c * moveY)) / ((a * d) - (c * b));\n                const translateY = ((moveY * a) - (b * moveX)) / ((a * d) - (c * b));\n                /**\n                 * Equals to\n                 * this.$translate(translateX, translateX);\n                 * this.$rotate(angle);\n                 * this.$translate(-translateX, -translateX);\n                 */\n                this.$transform(scaleX, skewY, skewX, scaleY, translateX * (1 - scaleX) - translateY * skewX, translateY * (1 - scaleY) - translateX * skewY);\n            }\n            else {\n                this.$transform(scaleX, skewY, skewX, scaleY, 0, 0);\n            }\n        }\n        return this;\n    }\n    /**\n     * Zooms the image.\n     * @param {number} scale The zoom factor. Positive numbers for zooming in, and negative numbers for zooming out.\n     * @param {number} [x] The zoom origin in the horizontal, defaults to the center of the image.\n     * @param {number} [y] The zoom origin in the vertical, defaults to the center of the image.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $zoom(scale, x, y) {\n        if (!this.scalable || scale === 0) {\n            return this;\n        }\n        if (scale < 0) {\n            scale = 1 / (1 - scale);\n        }\n        else {\n            scale += 1;\n        }\n        if (isNumber(x) && isNumber(y)) {\n            const [a, b, c, d] = this.$matrix;\n            const { width, height } = this.getBoundingClientRect();\n            const originX = width / 2;\n            const originY = height / 2;\n            const moveX = x - originX;\n            const moveY = y - originY;\n            const translateX = ((moveX * d) - (c * moveY)) / ((a * d) - (c * b));\n            const translateY = ((moveY * a) - (b * moveX)) / ((a * d) - (c * b));\n            /**\n             * Equals to\n             * this.$translate(translateX, translateX);\n             * this.$scale(scale);\n             * this.$translate(-translateX, -translateX);\n             */\n            this.$transform(scale, 0, 0, scale, translateX * (1 - scale), translateY * (1 - scale));\n        }\n        else {\n            this.$scale(scale);\n        }\n        return this;\n    }\n    /**\n     * Scales the image.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/scale}\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/scale}\n     * @param {number} x The scaling factor in the horizontal direction.\n     * @param {number} [y] The scaling factor in the vertical direction.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $scale(x, y = x) {\n        if (this.scalable) {\n            this.$transform(x, 0, 0, y, 0, 0);\n        }\n        return this;\n    }\n    /**\n     * Skews the image.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/skew}\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/transform}\n     * @param {number|string} x The skewing angle in the horizontal direction.\n     * @param {number|string} [y] The skewing angle in the vertical direction.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $skew(x, y = 0) {\n        if (this.skewable) {\n            const radianX = toAngleInRadian(x);\n            const radianY = toAngleInRadian(y);\n            this.$transform(1, Math.tan(radianY), Math.tan(radianX), 1, 0, 0);\n        }\n        return this;\n    }\n    /**\n     * Translates the image.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translate}\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/translate}\n     * @param {number} x The translating distance in the horizontal direction.\n     * @param {number} [y] The translating distance in the vertical direction.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $translate(x, y = x) {\n        if (this.translatable && isNumber(x) && isNumber(y)) {\n            this.$transform(1, 0, 0, 1, x, y);\n        }\n        return this;\n    }\n    /**\n     * Transforms the image.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/matrix}\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/transform}\n     * @param {number} a The scaling factor in the horizontal direction.\n     * @param {number} b The skewing angle in the vertical direction.\n     * @param {number} c The skewing angle in the horizontal direction.\n     * @param {number} d The scaling factor in the vertical direction.\n     * @param {number} e The translating distance in the horizontal direction.\n     * @param {number} f The translating distance in the vertical direction.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $transform(a, b, c, d, e, f) {\n        if (isNumber(a)\n            && isNumber(b)\n            && isNumber(c)\n            && isNumber(d)\n            && isNumber(e)\n            && isNumber(f)) {\n            return this.$setTransform(multiplyMatrices(this.$matrix, [a, b, c, d, e, f]));\n        }\n        return this;\n    }\n    /**\n     * Resets (overrides) the current transform to the specific identity matrix.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setTransform}\n     * @param {number|Array} a The scaling factor in the horizontal direction.\n     * @param {number} b The skewing angle in the vertical direction.\n     * @param {number} c The skewing angle in the horizontal direction.\n     * @param {number} d The scaling factor in the vertical direction.\n     * @param {number} e The translating distance in the horizontal direction.\n     * @param {number} f The translating distance in the vertical direction.\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $setTransform(a, b, c, d, e, f) {\n        if (this.rotatable || this.scalable || this.skewable || this.translatable) {\n            if (Array.isArray(a)) {\n                [a, b, c, d, e, f] = a;\n            }\n            if (isNumber(a)\n                && isNumber(b)\n                && isNumber(c)\n                && isNumber(d)\n                && isNumber(e)\n                && isNumber(f)) {\n                const oldMatrix = [...this.$matrix];\n                const newMatrix = [a, b, c, d, e, f];\n                if (this.$emit(EVENT_TRANSFORM, {\n                    matrix: newMatrix,\n                    oldMatrix,\n                }) === false) {\n                    return this;\n                }\n                this.$matrix = newMatrix;\n                this.style.transform = `matrix(${newMatrix.join(', ')})`;\n            }\n        }\n        return this;\n    }\n    /**\n     * Retrieves the current transformation matrix being applied to the element.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getTransform}\n     * @returns {Array} Returns the readonly transformation matrix.\n     */\n    $getTransform() {\n        return this.$matrix.slice();\n    }\n    /**\n     * Resets the current transform to the initial identity matrix.\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/resetTransform}\n     * @returns {CropperImage} Returns `this` for chaining.\n     */\n    $resetTransform() {\n        return this.$setTransform([1, 0, 0, 1, 0, 0]);\n    }\n}\nCropperImage.$name = CROPPER_IMAGE;\nCropperImage.$version = '2.1.0';\n\nexport { CropperImage as default };\n","import CropperElement from '@cropper/element';\nimport { CROPPER_SHADE, CROPPER_CANVAS, CROPPER_SELECTION, ACTION_SELECT, on, EVENT_ACTION_START, EVENT_ACTION_END, EVENT_CHANGE, off, isNumber, WINDOW } from '@cropper/utils';\n\nvar style = `:host{display:block;height:0;left:0;outline:var(--theme-color) solid 1px;position:relative;top:0;width:0}:host([transparent]){outline-color:transparent}`;\n\nconst canvasCache = new WeakMap();\nclass CropperShade extends CropperElement {\n    constructor() {\n        super(...arguments);\n        this.$onCanvasActionEnd = null;\n        this.$onCanvasActionStart = null;\n        this.$onSelectionChange = null;\n        this.$style = style;\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n        this.slottable = false;\n        this.themeColor = 'rgba(0, 0, 0, 0.65)';\n    }\n    set $canvas(element) {\n        canvasCache.set(this, element);\n    }\n    get $canvas() {\n        return canvasCache.get(this);\n    }\n    static get observedAttributes() {\n        return super.observedAttributes.concat([\n            'height',\n            'width',\n            'x',\n            'y',\n        ]);\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        const $canvas = this.closest(this.$getTagNameOf(CROPPER_CANVAS));\n        if ($canvas) {\n            this.$canvas = $canvas;\n            this.style.position = 'absolute';\n            const $selection = $canvas.querySelector(this.$getTagNameOf(CROPPER_SELECTION));\n            if ($selection) {\n                this.$onCanvasActionStart = (event) => {\n                    if ($selection.hidden && event.detail.action === ACTION_SELECT) {\n                        this.hidden = false;\n                    }\n                };\n                this.$onCanvasActionEnd = (event) => {\n                    if ($selection.hidden && event.detail.action === ACTION_SELECT) {\n                        this.hidden = true;\n                    }\n                };\n                this.$onSelectionChange = (event) => {\n                    const { x, y, width, height, } = event.defaultPrevented ? $selection : event.detail;\n                    this.$change(x, y, width, height);\n                    if ($selection.hidden || (x === 0 && y === 0 && width === 0 && height === 0)) {\n                        this.hidden = true;\n                    }\n                };\n                on($canvas, EVENT_ACTION_START, this.$onCanvasActionStart);\n                on($canvas, EVENT_ACTION_END, this.$onCanvasActionEnd);\n                on($canvas, EVENT_CHANGE, this.$onSelectionChange);\n            }\n        }\n        this.$render();\n    }\n    disconnectedCallback() {\n        const { $canvas } = this;\n        if ($canvas) {\n            if (this.$onCanvasActionStart) {\n                off($canvas, EVENT_ACTION_START, this.$onCanvasActionStart);\n                this.$onCanvasActionStart = null;\n            }\n            if (this.$onCanvasActionEnd) {\n                off($canvas, EVENT_ACTION_END, this.$onCanvasActionEnd);\n                this.$onCanvasActionEnd = null;\n            }\n            if (this.$onSelectionChange) {\n                off($canvas, EVENT_CHANGE, this.$onSelectionChange);\n                this.$onSelectionChange = null;\n            }\n        }\n        super.disconnectedCallback();\n    }\n    /**\n     * Changes the position and/or size of the shade.\n     * @param {number} x The new position in the horizontal direction.\n     * @param {number} y The new position in the vertical direction.\n     * @param {number} [width] The new width.\n     * @param {number} [height] The new height.\n     * @returns {CropperShade} Returns `this` for chaining.\n     */\n    $change(x, y, width = this.width, height = this.height) {\n        if (!isNumber(x)\n            || !isNumber(y)\n            || !isNumber(width)\n            || !isNumber(height)\n            || (x === this.x && y === this.y && width === this.width && height === this.height)) {\n            return this;\n        }\n        if (this.hidden) {\n            this.hidden = false;\n        }\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        return this.$render();\n    }\n    /**\n     * Resets the shade to its initial position and size.\n     * @returns {CropperShade} Returns `this` for chaining.\n     */\n    $reset() {\n        return this.$change(0, 0, 0, 0);\n    }\n    /**\n     * Refreshes the position or size of the shade.\n     * @returns {CropperShade} Returns `this` for chaining.\n     */\n    $render() {\n        return this.$setStyles({\n            transform: `translate(${this.x}px, ${this.y}px)`,\n            width: this.width,\n            height: this.height,\n            outlineWidth: WINDOW.innerWidth,\n        });\n    }\n}\nCropperShade.$name = CROPPER_SHADE;\nCropperShade.$version = '2.1.0';\n\nexport { CropperShade as default };\n","import CropperElement from '@cropper/element';\nimport { CROPPER_HANDLE, ACTION_NONE } from '@cropper/utils';\n\nvar style = `:host{background-color:var(--theme-color);display:block}:host([action=move]),:host([action=select]){height:100%;left:0;position:absolute;top:0;width:100%}:host([action=move]){cursor:move}:host([action=select]){cursor:crosshair}:host([action$=-resize]){background-color:transparent;height:15px;position:absolute;width:15px}:host([action$=-resize]):after{background-color:var(--theme-color);content:\"\";display:block;height:5px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:5px}:host([action=n-resize]),:host([action=s-resize]){cursor:ns-resize;left:50%;transform:translateX(-50%);width:100%}:host([action=n-resize]){top:-8px}:host([action=s-resize]){bottom:-8px}:host([action=e-resize]),:host([action=w-resize]){cursor:ew-resize;height:100%;top:50%;transform:translateY(-50%)}:host([action=e-resize]){right:-8px}:host([action=w-resize]){left:-8px}:host([action=ne-resize]){cursor:nesw-resize;right:-8px;top:-8px}:host([action=nw-resize]){cursor:nwse-resize;left:-8px;top:-8px}:host([action=se-resize]){bottom:-8px;cursor:nwse-resize;right:-8px}:host([action=se-resize]):after{height:15px;width:15px}@media (pointer:coarse){:host([action=se-resize]):after{height:10px;width:10px}}@media (pointer:fine){:host([action=se-resize]):after{height:5px;width:5px}}:host([action=sw-resize]){bottom:-8px;cursor:nesw-resize;left:-8px}:host([plain]){background-color:transparent}`;\n\nclass CropperHandle extends CropperElement {\n    constructor() {\n        super(...arguments);\n        this.$onCanvasCropEnd = null;\n        this.$onCanvasCropStart = null;\n        this.$style = style;\n        this.action = ACTION_NONE;\n        this.plain = false;\n        this.slottable = false;\n        this.themeColor = 'rgba(51, 153, 255, 0.5)';\n    }\n    static get observedAttributes() {\n        return super.observedAttributes.concat([\n            'action',\n            'plain',\n        ]);\n    }\n}\nCropperHandle.$name = CROPPER_HANDLE;\nCropperHandle.$version = '2.1.0';\n\nexport { CropperHandle as default };\n","import CropperElement from '@cropper/element';\nimport { CROPPER_SELECTION, EVENT_CHANGE, on, EVENT_KEYDOWN, off, isPositiveNumber, CROPPER_CANVAS, EVENT_ACTION_START, EVENT_ACTION_END, EVENT_ACTION, getAdjustedSizes, getComposedPathTarget, ACTION_SELECT, ACTION_SCALE, getOffset, ACTION_MOVE, ACTION_RESIZE_NORTHWEST, ACTION_RESIZE_SOUTHWEST, ACTION_RESIZE_NORTHEAST, ACTION_RESIZE_SOUTHEAST, isNumber, isPlainObject, CROPPER_IMAGE, isFunction, ACTION_RESIZE_WEST, ACTION_RESIZE_EAST, ACTION_RESIZE_SOUTH, ACTION_RESIZE_NORTH } from '@cropper/utils';\n\nvar style = `:host{display:block;left:0;position:relative;right:0}:host([outlined]){outline:1px solid var(--theme-color)}:host([multiple]){outline:1px dashed hsla(0,0%,100%,.5)}:host([multiple]):after{bottom:0;content:\"\";cursor:pointer;display:block;left:0;position:absolute;right:0;top:0}:host([multiple][active]){outline-color:var(--theme-color);z-index:1}:host([multiple])>*{visibility:hidden}:host([multiple][active])>*{visibility:visible}:host([multiple][active]):after{display:none}`;\n\nconst canvasCache = new WeakMap();\nclass CropperSelection extends CropperElement {\n    constructor() {\n        super(...arguments);\n        this.$onCanvasAction = null;\n        this.$onCanvasActionStart = null;\n        this.$onCanvasActionEnd = null;\n        this.$onDocumentKeyDown = null;\n        this.$action = '';\n        this.$actionStartTarget = null;\n        this.$changing = false;\n        this.$style = style;\n        this.$initialSelection = {\n            x: 0,\n            y: 0,\n            width: 0,\n            height: 0,\n        };\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n        this.aspectRatio = NaN;\n        this.initialAspectRatio = NaN;\n        this.initialCoverage = NaN;\n        this.active = false;\n        // Deprecated as of v2.0.0-rc.0, use `dynamic` instead.\n        this.linked = false;\n        this.dynamic = false;\n        this.movable = false;\n        this.resizable = false;\n        this.zoomable = false;\n        this.multiple = false;\n        this.keyboard = false;\n        this.outlined = false;\n        this.precise = false;\n    }\n    set $canvas(element) {\n        canvasCache.set(this, element);\n    }\n    get $canvas() {\n        return canvasCache.get(this);\n    }\n    static get observedAttributes() {\n        return super.observedAttributes.concat([\n            'active',\n            'aspect-ratio',\n            'dynamic',\n            'height',\n            'initial-aspect-ratio',\n            'initial-coverage',\n            'keyboard',\n            'linked',\n            'movable',\n            'multiple',\n            'outlined',\n            'precise',\n            'resizable',\n            'width',\n            'x',\n            'y',\n            'zoomable',\n        ]);\n    }\n    $propertyChangedCallback(name, oldValue, newValue) {\n        if (Object.is(newValue, oldValue)) {\n            return;\n        }\n        super.$propertyChangedCallback(name, oldValue, newValue);\n        switch (name) {\n            case 'x':\n            case 'y':\n            case 'width':\n            case 'height':\n                if (!this.$changing) {\n                    this.$nextTick(() => {\n                        this.$change(this.x, this.y, this.width, this.height, this.aspectRatio, true);\n                    });\n                }\n                break;\n            case 'aspectRatio':\n            case 'initialAspectRatio':\n                this.$nextTick(() => {\n                    this.$initSelection();\n                });\n                break;\n            case 'initialCoverage':\n                this.$nextTick(() => {\n                    if (isPositiveNumber(newValue) && newValue <= 1) {\n                        this.$initSelection(true, true);\n                    }\n                });\n                break;\n            case 'keyboard':\n                this.$nextTick(() => {\n                    if (this.$canvas) {\n                        if (newValue) {\n                            if (!this.$onDocumentKeyDown) {\n                                this.$onDocumentKeyDown = this.$handleKeyDown.bind(this);\n                                on(this.ownerDocument, EVENT_KEYDOWN, this.$onDocumentKeyDown);\n                            }\n                        }\n                        else if (this.$onDocumentKeyDown) {\n                            off(this.ownerDocument, EVENT_KEYDOWN, this.$onDocumentKeyDown);\n                            this.$onDocumentKeyDown = null;\n                        }\n                    }\n                });\n                break;\n            case 'multiple':\n                this.$nextTick(() => {\n                    if (this.$canvas) {\n                        const selections = this.$getSelections();\n                        if (newValue) {\n                            selections.forEach((selection) => {\n                                selection.active = false;\n                            });\n                            this.active = true;\n                            this.$emit(EVENT_CHANGE, {\n                                x: this.x,\n                                y: this.y,\n                                width: this.width,\n                                height: this.height,\n                            });\n                        }\n                        else {\n                            this.active = false;\n                            selections.slice(1).forEach((selection) => {\n                                this.$removeSelection(selection);\n                            });\n                        }\n                    }\n                });\n                break;\n            case 'precise':\n                this.$nextTick(() => {\n                    this.$change(this.x, this.y);\n                });\n                break;\n            // Backwards compatible with 2.0.0-rc\n            case 'linked':\n                if (newValue) {\n                    this.dynamic = true;\n                }\n                break;\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        const $canvas = this.closest(this.$getTagNameOf(CROPPER_CANVAS));\n        if ($canvas) {\n            this.$canvas = $canvas;\n            this.$setStyles({\n                position: 'absolute',\n                transform: `translate(${this.x}px, ${this.y}px)`,\n            });\n            if (!this.hidden) {\n                this.$render();\n            }\n            this.$initSelection(true);\n            this.$onCanvasActionStart = this.$handleActionStart.bind(this);\n            this.$onCanvasActionEnd = this.$handleActionEnd.bind(this);\n            this.$onCanvasAction = this.$handleAction.bind(this);\n            on($canvas, EVENT_ACTION_START, this.$onCanvasActionStart);\n            on($canvas, EVENT_ACTION_END, this.$onCanvasActionEnd);\n            on($canvas, EVENT_ACTION, this.$onCanvasAction);\n        }\n        else {\n            this.$render();\n        }\n    }\n    disconnectedCallback() {\n        const { $canvas } = this;\n        if ($canvas) {\n            if (this.$onCanvasActionStart) {\n                off($canvas, EVENT_ACTION_START, this.$onCanvasActionStart);\n                this.$onCanvasActionStart = null;\n            }\n            if (this.$onCanvasActionEnd) {\n                off($canvas, EVENT_ACTION_END, this.$onCanvasActionEnd);\n                this.$onCanvasActionEnd = null;\n            }\n            if (this.$onCanvasAction) {\n                off($canvas, EVENT_ACTION, this.$onCanvasAction);\n                this.$onCanvasAction = null;\n            }\n        }\n        super.disconnectedCallback();\n    }\n    $getSelections() {\n        let selections = [];\n        if (this.parentElement) {\n            selections = Array.from(this.parentElement.querySelectorAll(this.$getTagNameOf(CROPPER_SELECTION)));\n        }\n        return selections;\n    }\n    $initSelection(center = false, resize = false) {\n        const { initialCoverage, parentElement } = this;\n        if (isPositiveNumber(initialCoverage) && parentElement) {\n            const aspectRatio = this.aspectRatio || this.initialAspectRatio;\n            let width = (resize ? 0 : this.width) || parentElement.offsetWidth * initialCoverage;\n            let height = (resize ? 0 : this.height) || parentElement.offsetHeight * initialCoverage;\n            if (isPositiveNumber(aspectRatio)) {\n                ({ width, height } = getAdjustedSizes({ aspectRatio, width, height }));\n            }\n            this.$change(this.x, this.y, width, height);\n            if (center) {\n                this.$center();\n            }\n            // Overrides the initial position and size\n            this.$initialSelection = {\n                x: this.x,\n                y: this.y,\n                width: this.width,\n                height: this.height,\n            };\n        }\n    }\n    $createSelection() {\n        const newSelection = this.cloneNode(true);\n        if (this.hasAttribute('id')) {\n            newSelection.removeAttribute('id');\n        }\n        newSelection.initialCoverage = NaN;\n        this.active = false;\n        if (this.parentElement) {\n            this.parentElement.insertBefore(newSelection, this.nextSibling);\n        }\n        return newSelection;\n    }\n    $removeSelection(selection = this) {\n        if (this.parentElement) {\n            const selections = this.$getSelections();\n            if (selections.length > 1) {\n                const index = selections.indexOf(selection);\n                const activeSelection = selections[index + 1] || selections[index - 1];\n                if (activeSelection) {\n                    selection.active = false;\n                    this.parentElement.removeChild(selection);\n                    activeSelection.active = true;\n                    activeSelection.$emit(EVENT_CHANGE, {\n                        x: activeSelection.x,\n                        y: activeSelection.y,\n                        width: activeSelection.width,\n                        height: activeSelection.height,\n                    });\n                }\n            }\n            else {\n                this.$clear();\n            }\n        }\n    }\n    $handleActionStart(event) {\n        var _a, _b;\n        const relatedTarget = (_b = (_a = event.detail) === null || _a === void 0 ? void 0 : _a.relatedEvent) === null || _b === void 0 ? void 0 : _b.target;\n        this.$action = '';\n        this.$actionStartTarget = relatedTarget;\n        if (!this.hidden\n            && this.multiple\n            && !this.active\n            && relatedTarget === this\n            && this.parentElement) {\n            this.$getSelections().forEach((selection) => {\n                selection.active = false;\n            });\n            this.active = true;\n            this.$emit(EVENT_CHANGE, {\n                x: this.x,\n                y: this.y,\n                width: this.width,\n                height: this.height,\n            });\n        }\n    }\n    $handleAction(event) {\n        const { currentTarget, detail } = event;\n        if (!currentTarget || !detail) {\n            return;\n        }\n        const { relatedEvent } = detail;\n        let { action } = detail;\n        const relatedTarget = relatedEvent\n            ? getComposedPathTarget(relatedEvent)\n            : null;\n        // Switching to another selection\n        if (!action && this.multiple) {\n            // Get the `action` property from the focusing in selection\n            action = this.$action || (relatedTarget === null || relatedTarget === void 0 ? void 0 : relatedTarget.action);\n            this.$action = action;\n        }\n        if (!action\n            || (this.hidden && action !== ACTION_SELECT)\n            || (this.multiple && !this.active && action !== ACTION_SCALE)) {\n            return;\n        }\n        const { width, height } = this;\n        let moveX = detail.endX - detail.startX;\n        let moveY = detail.endY - detail.startY;\n        let { aspectRatio } = this;\n        // Locking aspect ratio by holding shift key\n        if (!isPositiveNumber(aspectRatio) && relatedEvent.shiftKey) {\n            aspectRatio = isPositiveNumber(width) && isPositiveNumber(height) ? width / height : 1;\n        }\n        switch (action) {\n            case ACTION_SELECT:\n                if (moveX !== 0 || moveY !== 0) {\n                    // Force to create a square selection for better user experience\n                    if (moveX === 0) {\n                        moveX = moveY;\n                    }\n                    else if (moveY === 0) {\n                        moveY = moveX;\n                    }\n                    const { $canvas } = this;\n                    const offset = getOffset(currentTarget);\n                    (this.multiple && !this.hidden ? this.$createSelection() : this).$change(detail.startX - offset.left, detail.startY - offset.top, Math.abs(moveX), Math.abs(moveY), aspectRatio);\n                    if (moveX < 0) {\n                        if (moveY < 0) {\n                            // \n                            action = ACTION_RESIZE_NORTHWEST;\n                        }\n                        else if (moveY > 0) {\n                            // \n                            action = ACTION_RESIZE_SOUTHWEST;\n                        }\n                    }\n                    else if (moveX > 0) {\n                        if (moveY < 0) {\n                            // \n                            action = ACTION_RESIZE_NORTHEAST;\n                        }\n                        else if (moveY > 0) {\n                            // \n                            action = ACTION_RESIZE_SOUTHEAST;\n                        }\n                    }\n                    if ($canvas) {\n                        $canvas.$action = action;\n                    }\n                }\n                break;\n            case ACTION_MOVE:\n                if (this.movable && (this.dynamic\n                    || (this.$actionStartTarget && this.contains(this.$actionStartTarget)))) {\n                    this.$move(moveX, moveY);\n                }\n                break;\n            case ACTION_SCALE:\n                if (relatedEvent && this.zoomable && (this.dynamic\n                    || this.contains(relatedEvent.target))) {\n                    const offset = getOffset(currentTarget);\n                    this.$zoom(detail.scale, relatedEvent.pageX - offset.left, relatedEvent.pageY - offset.top);\n                }\n                break;\n            default:\n                this.$resize(action, moveX, moveY, aspectRatio);\n        }\n    }\n    $handleActionEnd() {\n        this.$action = '';\n        this.$actionStartTarget = null;\n    }\n    $handleKeyDown(event) {\n        if (this.hidden\n            || !this.keyboard\n            || (this.multiple && !this.active)\n            || event.defaultPrevented) {\n            return;\n        }\n        const { activeElement } = document;\n        // Disable keyboard control when input something\n        if (activeElement && (['INPUT', 'TEXTAREA'].includes(activeElement.tagName)\n            || ['true', 'plaintext-only'].includes(activeElement.contentEditable))) {\n            return;\n        }\n        switch (event.key) {\n            case 'Backspace':\n                if (event.metaKey) {\n                    event.preventDefault();\n                    this.$removeSelection();\n                }\n                break;\n            case 'Delete':\n                event.preventDefault();\n                this.$removeSelection();\n                break;\n            // Move to the left\n            case 'ArrowLeft':\n                event.preventDefault();\n                this.$move(-1, 0);\n                break;\n            // Move to the right\n            case 'ArrowRight':\n                event.preventDefault();\n                this.$move(1, 0);\n                break;\n            // Move to the top\n            case 'ArrowUp':\n                event.preventDefault();\n                this.$move(0, -1);\n                break;\n            // Move to the bottom\n            case 'ArrowDown':\n                event.preventDefault();\n                this.$move(0, 1);\n                break;\n            case '+':\n                event.preventDefault();\n                this.$zoom(0.1);\n                break;\n            case '-':\n                event.preventDefault();\n                this.$zoom(-0.1);\n                break;\n        }\n    }\n    /**\n     * Aligns the selection to the center of its parent element.\n     * @returns {CropperSelection} Returns `this` for chaining.\n     */\n    $center() {\n        const { parentElement } = this;\n        if (!parentElement) {\n            return this;\n        }\n        const x = (parentElement.offsetWidth - this.width) / 2;\n        const y = (parentElement.offsetHeight - this.height) / 2;\n        return this.$change(x, y);\n    }\n    /**\n     * Moves the selection.\n     * @param {number} x The moving distance in the horizontal direction.\n     * @param {number} [y] The moving distance in the vertical direction.\n     * @returns {CropperSelection} Returns `this` for chaining.\n     */\n    $move(x, y = x) {\n        return this.$moveTo(this.x + x, this.y + y);\n    }\n    /**\n     * Moves the selection to a specific position.\n     * @param {number} x The new position in the horizontal direction.\n     * @param {number} [y] The new position in the vertical direction.\n     * @returns {CropperSelection} Returns `this` for chaining.\n     */\n    $moveTo(x, y = x) {\n        if (!this.movable) {\n            return this;\n        }\n        return this.$change(x, y);\n    }\n    /**\n     * Adjusts the size the selection on a specific side or corner.\n     * @param {string} action Indicates the side or corner to resize.\n     * @param {number} [offsetX] The horizontal offset of the specific side or corner.\n     * @param {number} [offsetY] The vertical offset of the specific side or corner.\n     * @param {number} [aspectRatio] The aspect ratio for computing the new size if it is necessary.\n     * @returns {CropperSelection} Returns `this` for chaining.\n     */\n    $resize(action, offsetX = 0, offsetY = 0, aspectRatio = this.aspectRatio) {\n        if (!this.resizable) {\n            return this;\n        }\n        const hasValidAspectRatio = isPositiveNumber(aspectRatio);\n        const { $canvas } = this;\n        let { x, y, width, height, } = this;\n        switch (action) {\n            case ACTION_RESIZE_NORTH:\n                y += offsetY;\n                height -= offsetY;\n                if (height < 0) {\n                    action = ACTION_RESIZE_SOUTH;\n                    height = -height;\n                    y -= height;\n                }\n                if (hasValidAspectRatio) {\n                    offsetX = offsetY * aspectRatio;\n                    x += offsetX / 2;\n                    width -= offsetX;\n                    if (width < 0) {\n                        width = -width;\n                        x -= width;\n                    }\n                }\n                break;\n            case ACTION_RESIZE_EAST:\n                width += offsetX;\n                if (width < 0) {\n                    action = ACTION_RESIZE_WEST;\n                    width = -width;\n                    x -= width;\n                }\n                if (hasValidAspectRatio) {\n                    offsetY = offsetX / aspectRatio;\n                    y -= offsetY / 2;\n                    height += offsetY;\n                    if (height < 0) {\n                        height = -height;\n                        y -= height;\n                    }\n                }\n                break;\n            case ACTION_RESIZE_SOUTH:\n                height += offsetY;\n                if (height < 0) {\n                    action = ACTION_RESIZE_NORTH;\n                    height = -height;\n                    y -= height;\n                }\n                if (hasValidAspectRatio) {\n                    offsetX = offsetY * aspectRatio;\n                    x -= offsetX / 2;\n                    width += offsetX;\n                    if (width < 0) {\n                        width = -width;\n                        x -= width;\n                    }\n                }\n                break;\n            case ACTION_RESIZE_WEST:\n                x += offsetX;\n                width -= offsetX;\n                if (width < 0) {\n                    action = ACTION_RESIZE_EAST;\n                    width = -width;\n                    x -= width;\n                }\n                if (hasValidAspectRatio) {\n                    offsetY = offsetX / aspectRatio;\n                    y += offsetY / 2;\n                    height -= offsetY;\n                    if (height < 0) {\n                        height = -height;\n                        y -= height;\n                    }\n                }\n                break;\n            case ACTION_RESIZE_NORTHEAST:\n                if (hasValidAspectRatio) {\n                    offsetY = -offsetX / aspectRatio;\n                }\n                y += offsetY;\n                height -= offsetY;\n                width += offsetX;\n                if (width < 0 && height < 0) {\n                    action = ACTION_RESIZE_SOUTHWEST;\n                    width = -width;\n                    height = -height;\n                    x -= width;\n                    y -= height;\n                }\n                else if (width < 0) {\n                    action = ACTION_RESIZE_NORTHWEST;\n                    width = -width;\n                    x -= width;\n                }\n                else if (height < 0) {\n                    action = ACTION_RESIZE_SOUTHEAST;\n                    height = -height;\n                    y -= height;\n                }\n                break;\n            case ACTION_RESIZE_NORTHWEST:\n                if (hasValidAspectRatio) {\n                    offsetY = offsetX / aspectRatio;\n                }\n                x += offsetX;\n                y += offsetY;\n                width -= offsetX;\n                height -= offsetY;\n                if (width < 0 && height < 0) {\n                    action = ACTION_RESIZE_SOUTHEAST;\n                    width = -width;\n                    height = -height;\n                    x -= width;\n                    y -= height;\n                }\n                else if (width < 0) {\n                    action = ACTION_RESIZE_NORTHEAST;\n                    width = -width;\n                    x -= width;\n                }\n                else if (height < 0) {\n                    action = ACTION_RESIZE_SOUTHWEST;\n                    height = -height;\n                    y -= height;\n                }\n                break;\n            case ACTION_RESIZE_SOUTHEAST:\n                if (hasValidAspectRatio) {\n                    offsetY = offsetX / aspectRatio;\n                }\n                width += offsetX;\n                height += offsetY;\n                if (width < 0 && height < 0) {\n                    action = ACTION_RESIZE_NORTHWEST;\n                    width = -width;\n                    height = -height;\n                    x -= width;\n                    y -= height;\n                }\n                else if (width < 0) {\n                    action = ACTION_RESIZE_SOUTHWEST;\n                    width = -width;\n                    x -= width;\n                }\n                else if (height < 0) {\n                    action = ACTION_RESIZE_NORTHEAST;\n                    height = -height;\n                    y -= height;\n                }\n                break;\n            case ACTION_RESIZE_SOUTHWEST:\n                if (hasValidAspectRatio) {\n                    offsetY = -offsetX / aspectRatio;\n                }\n                x += offsetX;\n                width -= offsetX;\n                height += offsetY;\n                if (width < 0 && height < 0) {\n                    action = ACTION_RESIZE_NORTHEAST;\n                    width = -width;\n                    height = -height;\n                    x -= width;\n                    y -= height;\n                }\n                else if (width < 0) {\n                    action = ACTION_RESIZE_SOUTHEAST;\n                    width = -width;\n                    x -= width;\n                }\n                else if (height < 0) {\n                    action = ACTION_RESIZE_NORTHWEST;\n                    height = -height;\n                    y -= height;\n                }\n                break;\n        }\n        if ($canvas) {\n            $canvas.$setAction(action);\n        }\n        return this.$change(x, y, width, height);\n    }\n    /**\n     * Zooms the selection.\n     * @param {number} scale The zoom factor. Positive numbers for zooming in, and negative numbers for zooming out.\n     * @param {number} [x] The zoom origin in the horizontal, defaults to the center of the selection.\n     * @param {number} [y] The zoom origin in the vertical, defaults to the center of the selection.\n     * @returns {CropperSelection} Returns `this` for chaining.\n     */\n    $zoom(scale, x, y) {\n        if (!this.zoomable || scale === 0) {\n            return this;\n        }\n        if (scale < 0) {\n            scale = 1 / (1 - scale);\n        }\n        else {\n            scale += 1;\n        }\n        const { width, height } = this;\n        const newWidth = width * scale;\n        const newHeight = height * scale;\n        let newX = this.x;\n        let newY = this.y;\n        if (isNumber(x) && isNumber(y)) {\n            newX -= (newWidth - width) * ((x - this.x) / width);\n            newY -= (newHeight - height) * ((y - this.y) / height);\n        }\n        else {\n            // Zoom from the center of the selection\n            newX -= (newWidth - width) / 2;\n            newY -= (newHeight - height) / 2;\n        }\n        return this.$change(newX, newY, newWidth, newHeight);\n    }\n    /**\n     * Changes the position and/or size of the selection.\n     * @param {number} x The new position in the horizontal direction.\n     * @param {number} y The new position in the vertical direction.\n     * @param {number} [width] The new width.\n     * @param {number} [height] The new height.\n     * @param {number} [aspectRatio] The new aspect ratio for this change only.\n     * @param {number} [_force] Force change.\n     * @returns {CropperSelection} Returns `this` for chaining.\n     */\n    $change(x, y, width = this.width, height = this.height, aspectRatio = this.aspectRatio, _force = false) {\n        if (this.$changing\n            || !isNumber(x)\n            || !isNumber(y)\n            || !isNumber(width)\n            || !isNumber(height)\n            || width < 0\n            || height < 0) {\n            return this;\n        }\n        if (isPositiveNumber(aspectRatio)) {\n            ({ width, height } = getAdjustedSizes({ aspectRatio, width, height }, 'cover'));\n        }\n        if (!this.precise) {\n            x = Math.round(x);\n            y = Math.round(y);\n            width = Math.round(width);\n            height = Math.round(height);\n        }\n        if (x === this.x\n            && y === this.y\n            && width === this.width\n            && height === this.height\n            && Object.is(aspectRatio, this.aspectRatio)\n            && !_force) {\n            return this;\n        }\n        if (this.hidden) {\n            this.hidden = false;\n        }\n        if (this.$emit(EVENT_CHANGE, {\n            x,\n            y,\n            width,\n            height,\n        }) === false) {\n            return this;\n        }\n        this.$changing = true;\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.$changing = false;\n        return this.$render();\n    }\n    /**\n     * Resets the selection to its initial position and size.\n     * @returns {CropperSelection} Returns `this` for chaining.\n     */\n    $reset() {\n        const { x, y, width, height, } = this.$initialSelection;\n        return this.$change(x, y, width, height);\n    }\n    /**\n     * Clears the selection.\n     * @returns {CropperSelection} Returns `this` for chaining.\n     */\n    $clear() {\n        this.$change(0, 0, 0, 0, NaN, true);\n        this.hidden = true;\n        return this;\n    }\n    /**\n     * Refreshes the position or size of the selection.\n     * @returns {CropperSelection} Returns `this` for chaining.\n     */\n    $render() {\n        return this.$setStyles({\n            transform: `translate(${this.x}px, ${this.y}px)`,\n            width: this.width,\n            height: this.height,\n        });\n    }\n    /**\n     * Generates a real canvas element, with the image (selected area only) draw into if there is one.\n     * @param {object} [options] The available options.\n     * @param {number} [options.width] The width of the canvas.\n     * @param {number} [options.height] The height of the canvas.\n     * @param {Function} [options.beforeDraw] The function called before drawing the image onto the canvas.\n     * @returns {Promise} Returns a promise that resolves to the generated canvas element.\n     */\n    $toCanvas(options) {\n        return new Promise((resolve, reject) => {\n            if (!this.isConnected) {\n                reject(new Error('The current element is not connected to the DOM.'));\n                return;\n            }\n            const canvas = document.createElement('canvas');\n            let { width, height } = this;\n            let scale = 1;\n            if (isPlainObject(options)\n                && (isPositiveNumber(options.width) || isPositiveNumber(options.height))) {\n                ({ width, height } = getAdjustedSizes({\n                    aspectRatio: width / height,\n                    width: options.width,\n                    height: options.height,\n                }));\n                scale = width / this.width;\n            }\n            canvas.width = width;\n            canvas.height = height;\n            if (!this.$canvas) {\n                resolve(canvas);\n                return;\n            }\n            const cropperImage = this.$canvas.querySelector(this.$getTagNameOf(CROPPER_IMAGE));\n            if (!cropperImage) {\n                resolve(canvas);\n                return;\n            }\n            cropperImage.$ready().then((image) => {\n                const context = canvas.getContext('2d');\n                if (context) {\n                    const [a, b, c, d, e, f] = cropperImage.$getTransform();\n                    const offsetX = -this.x;\n                    const offsetY = -this.y;\n                    const translateX = ((offsetX * d) - (c * offsetY)) / ((a * d) - (c * b));\n                    const translateY = ((offsetY * a) - (b * offsetX)) / ((a * d) - (c * b));\n                    let newE = a * translateX + c * translateY + e;\n                    let newF = b * translateX + d * translateY + f;\n                    let destWidth = image.naturalWidth;\n                    let destHeight = image.naturalHeight;\n                    if (scale !== 1) {\n                        newE *= scale;\n                        newF *= scale;\n                        destWidth *= scale;\n                        destHeight *= scale;\n                    }\n                    const centerX = destWidth / 2;\n                    const centerY = destHeight / 2;\n                    context.fillStyle = 'transparent';\n                    context.fillRect(0, 0, width, height);\n                    if (isPlainObject(options) && isFunction(options.beforeDraw)) {\n                        options.beforeDraw.call(this, context, canvas);\n                    }\n                    context.save();\n                    // Move the transform origin to the center of the image.\n                    // https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin\n                    context.translate(centerX, centerY);\n                    context.transform(a, b, c, d, newE, newF);\n                    // Move the transform origin to the top-left of the image.\n                    context.translate(-centerX, -centerY);\n                    context.drawImage(image, 0, 0, destWidth, destHeight);\n                    context.restore();\n                }\n                resolve(canvas);\n            }).catch(reject);\n        });\n    }\n}\nCropperSelection.$name = CROPPER_SELECTION;\nCropperSelection.$version = '2.1.0';\n\nexport { CropperSelection as default };\n","import CropperElement from '@cropper/element';\nimport { CROPPER_GIRD } from '@cropper/utils';\n\nvar style = `:host{display:flex;flex-direction:column;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([bordered]){border:1px dashed var(--theme-color)}:host([covered]){bottom:0;left:0;position:absolute;right:0;top:0}:host>span{display:flex;flex:1}:host>span+span{border-top:1px dashed var(--theme-color)}:host>span>span{flex:1}:host>span>span+span{border-left:1px dashed var(--theme-color)}`;\n\nclass CropperGrid extends CropperElement {\n    constructor() {\n        super(...arguments);\n        this.$style = style;\n        this.bordered = false;\n        this.columns = 3;\n        this.covered = false;\n        this.rows = 3;\n        this.slottable = false;\n        this.themeColor = 'rgba(238, 238, 238, 0.5)';\n    }\n    static get observedAttributes() {\n        return super.observedAttributes.concat([\n            'bordered',\n            'columns',\n            'covered',\n            'rows',\n        ]);\n    }\n    $propertyChangedCallback(name, oldValue, newValue) {\n        if (Object.is(newValue, oldValue)) {\n            return;\n        }\n        super.$propertyChangedCallback(name, oldValue, newValue);\n        if (name === 'rows' || name === 'columns') {\n            this.$nextTick(() => {\n                this.$render();\n            });\n        }\n    }\n    connectedCallback() {\n        super.connectedCallback();\n        this.$render();\n    }\n    $render() {\n        const shadow = this.$getShadowRoot();\n        const fragment = document.createDocumentFragment();\n        for (let i = 0; i < this.rows; i += 1) {\n            const row = document.createElement('span');\n            row.setAttribute('role', 'row');\n            for (let j = 0; j < this.columns; j += 1) {\n                const column = document.createElement('span');\n                column.setAttribute('role', 'gridcell');\n                row.appendChild(column);\n            }\n            fragment.appendChild(row);\n        }\n        if (shadow) {\n            shadow.innerHTML = '';\n            shadow.appendChild(fragment);\n        }\n    }\n}\nCropperGrid.$name = CROPPER_GIRD;\nCropperGrid.$version = '2.1.0';\n\nexport { CropperGrid as default };\n","import CropperElement from '@cropper/element';\nimport { CROPPER_CROSSHAIR } from '@cropper/utils';\n\nvar style = `:host{display:inline-block;height:1em;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;width:1em}:host:after,:host:before{background-color:var(--theme-color);content:\"\";display:block;position:absolute}:host:before{height:1px;left:0;top:50%;transform:translateY(-50%);width:100%}:host:after{height:100%;left:50%;top:0;transform:translateX(-50%);width:1px}:host([centered]){left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}`;\n\nclass CropperCrosshair extends CropperElement {\n    constructor() {\n        super(...arguments);\n        this.$style = style;\n        this.centered = false;\n        this.slottable = false;\n        this.themeColor = 'rgba(238, 238, 238, 0.5)';\n    }\n    static get observedAttributes() {\n        return super.observedAttributes.concat([\n            'centered',\n        ]);\n    }\n}\nCropperCrosshair.$name = CROPPER_CROSSHAIR;\nCropperCrosshair.$version = '2.1.0';\n\nexport { CropperCrosshair as default };\n","import CropperElement from '@cropper/element';\nimport { CROPPER_VIEWER, getRootDocument, CROPPER_SELECTION, isElement, on, EVENT_CHANGE, CROPPER_CANVAS, CROPPER_IMAGE, EVENT_LOAD, EVENT_TRANSFORM, off } from '@cropper/utils';\n\nvar style = `:host{display:block;height:100%;overflow:hidden;position:relative;width:100%}`;\n\nconst canvasCache = new WeakMap();\nconst imageCache = new WeakMap();\nconst selectionCache = new WeakMap();\nconst sourceImageCache = new WeakMap();\nconst RESIZE_BOTH = 'both';\nconst RESIZE_HORIZONTAL = 'horizontal';\nconst RESIZE_VERTICAL = 'vertical';\nconst RESIZE_NONE = 'none';\nclass CropperViewer extends CropperElement {\n    constructor() {\n        super(...arguments);\n        this.$onSelectionChange = null;\n        this.$onSourceImageLoad = null;\n        this.$onSourceImageTransform = null;\n        this.$scale = 1;\n        this.$style = style;\n        this.resize = RESIZE_VERTICAL;\n        this.selection = '';\n        this.slottable = false;\n    }\n    set $image(element) {\n        imageCache.set(this, element);\n    }\n    get $image() {\n        return imageCache.get(this);\n    }\n    set $sourceImage(element) {\n        sourceImageCache.set(this, element);\n    }\n    get $sourceImage() {\n        return sourceImageCache.get(this);\n    }\n    set $canvas(element) {\n        canvasCache.set(this, element);\n    }\n    get $canvas() {\n        return canvasCache.get(this);\n    }\n    set $selection(element) {\n        selectionCache.set(this, element);\n    }\n    get $selection() {\n        return selectionCache.get(this);\n    }\n    static get observedAttributes() {\n        return super.observedAttributes.concat([\n            'resize',\n            'selection',\n        ]);\n    }\n    connectedCallback() {\n        var _a, _b;\n        super.connectedCallback();\n        let $selection = null;\n        if (this.selection) {\n            $selection = (_b = (_a = getRootDocument(this)) === null || _a === void 0 ? void 0 : _a.querySelector(this.selection)) !== null && _b !== void 0 ? _b : null;\n        }\n        else {\n            $selection = this.closest(this.$getTagNameOf(CROPPER_SELECTION));\n        }\n        if (isElement($selection)) {\n            this.$selection = $selection;\n            this.$onSelectionChange = this.$handleSelectionChange.bind(this);\n            on($selection, EVENT_CHANGE, this.$onSelectionChange);\n            const $canvas = $selection.closest(this.$getTagNameOf(CROPPER_CANVAS));\n            if ($canvas) {\n                this.$canvas = $canvas;\n                const $sourceImage = $canvas.querySelector(this.$getTagNameOf(CROPPER_IMAGE));\n                if ($sourceImage) {\n                    this.$sourceImage = $sourceImage;\n                    this.$image = $sourceImage.cloneNode(true);\n                    this.$getShadowRoot().appendChild(this.$image);\n                    this.$onSourceImageLoad = this.$handleSourceImageLoad.bind(this);\n                    this.$onSourceImageTransform = this.$handleSourceImageTransform.bind(this);\n                    on($sourceImage.$image, EVENT_LOAD, this.$onSourceImageLoad);\n                    on($sourceImage, EVENT_TRANSFORM, this.$onSourceImageTransform);\n                }\n            }\n            this.$render();\n        }\n    }\n    disconnectedCallback() {\n        const { $selection, $sourceImage } = this;\n        if ($selection && this.$onSelectionChange) {\n            off($selection, EVENT_CHANGE, this.$onSelectionChange);\n            this.$onSelectionChange = null;\n        }\n        if ($sourceImage && this.$onSourceImageLoad) {\n            off($sourceImage.$image, EVENT_LOAD, this.$onSourceImageLoad);\n            this.$onSourceImageLoad = null;\n        }\n        if ($sourceImage && this.$onSourceImageTransform) {\n            off($sourceImage, EVENT_TRANSFORM, this.$onSourceImageTransform);\n            this.$onSourceImageTransform = null;\n        }\n        super.disconnectedCallback();\n    }\n    $handleSelectionChange(event) {\n        this.$render(event.defaultPrevented ? this.$selection : event.detail);\n    }\n    $handleSourceImageLoad() {\n        const { $image, $sourceImage } = this;\n        const oldSrc = $image.getAttribute('src');\n        const newSrc = $sourceImage.getAttribute('src');\n        if (newSrc && newSrc !== oldSrc) {\n            $image.setAttribute('src', newSrc);\n            $image.$ready(() => {\n                this.$render();\n            });\n        }\n    }\n    $handleSourceImageTransform(event) {\n        this.$render(undefined, event.detail.matrix);\n    }\n    $render(selection, matrix) {\n        const { $canvas, $selection } = this;\n        if (!selection && !$selection.hidden) {\n            selection = $selection;\n        }\n        if (!selection || (selection.x === 0\n            && selection.y === 0\n            && selection.width === 0\n            && selection.height === 0)) {\n            selection = {\n                x: 0,\n                y: 0,\n                width: $canvas.offsetWidth,\n                height: $canvas.offsetHeight,\n            };\n        }\n        const { x, y, width, height, } = selection;\n        const styles = {};\n        const { clientWidth, clientHeight } = this;\n        let newWidth = clientWidth;\n        let newHeight = clientHeight;\n        let scale = NaN;\n        switch (this.resize) {\n            case RESIZE_BOTH:\n                scale = 1;\n                newWidth = width;\n                newHeight = height;\n                styles.width = width;\n                styles.height = height;\n                break;\n            case RESIZE_HORIZONTAL:\n                scale = height > 0 ? clientHeight / height : 0;\n                newWidth = width * scale;\n                styles.width = newWidth;\n                break;\n            case RESIZE_VERTICAL:\n                scale = width > 0 ? clientWidth / width : 0;\n                newHeight = height * scale;\n                styles.height = newHeight;\n                break;\n            case RESIZE_NONE:\n            default:\n                if (clientWidth > 0) {\n                    scale = width > 0 ? clientWidth / width : 0;\n                }\n                else if (clientHeight > 0) {\n                    scale = height > 0 ? clientHeight / height : 0;\n                }\n        }\n        this.$scale = scale;\n        this.$setStyles(styles);\n        if (this.$sourceImage) {\n            // Transform the image by the selection offset after the next DOM update cycle\n            setTimeout(() => {\n                this.$transformImageByOffset(matrix !== null && matrix !== void 0 ? matrix : this.$sourceImage.$getTransform(), -x, -y);\n            });\n        }\n    }\n    $transformImageByOffset(matrix, x, y) {\n        const { $image, $scale, $sourceImage, } = this;\n        if ($sourceImage && $image && $scale >= 0) {\n            const [a, b, c, d, e, f] = matrix;\n            const translateX = ((x * d) - (c * y)) / ((a * d) - (c * b));\n            const translateY = ((y * a) - (b * x)) / ((a * d) - (c * b));\n            const newE = a * translateX + c * translateY + e;\n            const newF = b * translateX + d * translateY + f;\n            $image.$ready((image) => {\n                this.$setStyles.call($image, {\n                    width: image.naturalWidth * $scale,\n                    height: image.naturalHeight * $scale,\n                });\n            });\n            $image.$setTransform(a, b, c, d, newE * $scale, newF * $scale);\n        }\n    }\n}\nCropperViewer.$name = CROPPER_VIEWER;\nCropperViewer.$version = '2.1.0';\n\nexport { RESIZE_BOTH, RESIZE_HORIZONTAL, RESIZE_NONE, RESIZE_VERTICAL, CropperViewer as default };\n","/*! Cropper.js v2.1.0 | (c) 2015-present Chen Fengyuan | MIT */\nimport { isString, isElement, getRootDocument, CROPPER_IMAGE, CROPPER_CANVAS, CROPPER_SELECTION } from '@cropper/utils';\nexport * from '@cropper/utils';\nimport { CropperCanvas, CropperCrosshair, CropperGrid, CropperHandle, CropperImage, CropperSelection, CropperShade, CropperViewer } from '@cropper/elements';\nexport * from '@cropper/elements';\n\nvar DEFAULT_TEMPLATE = ('<cropper-canvas background>'\n    + '<cropper-image rotatable scalable skewable translatable></cropper-image>'\n    + '<cropper-shade hidden></cropper-shade>'\n    + '<cropper-handle action=\"select\" plain></cropper-handle>'\n    + '<cropper-selection initial-coverage=\"0.5\" movable resizable>'\n    + '<cropper-grid role=\"grid\" bordered covered></cropper-grid>'\n    + '<cropper-crosshair centered></cropper-crosshair>'\n    + '<cropper-handle action=\"move\" theme-color=\"rgba(255, 255, 255, 0.35)\"></cropper-handle>'\n    + '<cropper-handle action=\"n-resize\"></cropper-handle>'\n    + '<cropper-handle action=\"e-resize\"></cropper-handle>'\n    + '<cropper-handle action=\"s-resize\"></cropper-handle>'\n    + '<cropper-handle action=\"w-resize\"></cropper-handle>'\n    + '<cropper-handle action=\"ne-resize\"></cropper-handle>'\n    + '<cropper-handle action=\"nw-resize\"></cropper-handle>'\n    + '<cropper-handle action=\"se-resize\"></cropper-handle>'\n    + '<cropper-handle action=\"sw-resize\"></cropper-handle>'\n    + '</cropper-selection>'\n    + '</cropper-canvas>');\n\nconst REGEXP_ALLOWED_ELEMENTS = /^img|canvas$/;\nconst REGEXP_BLOCKED_TAGS = /<(\\/?(?:script|style)[^>]*)>/gi;\nconst DEFAULT_OPTIONS = {\n    template: DEFAULT_TEMPLATE,\n};\nCropperCanvas.$define();\nCropperCrosshair.$define();\nCropperGrid.$define();\nCropperHandle.$define();\nCropperImage.$define();\nCropperSelection.$define();\nCropperShade.$define();\nCropperViewer.$define();\nclass Cropper {\n    constructor(element, options) {\n        var _a;\n        this.options = DEFAULT_OPTIONS;\n        if (isString(element)) {\n            element = document.querySelector(element);\n        }\n        if (!isElement(element) || !REGEXP_ALLOWED_ELEMENTS.test(element.localName)) {\n            throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n        }\n        this.element = element;\n        options = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.options = options;\n        let { container } = options;\n        if (container) {\n            if (isString(container)) {\n                container = (_a = getRootDocument(element)) === null || _a === void 0 ? void 0 : _a.querySelector(container);\n            }\n            if (!isElement(container)) {\n                throw new Error('The `container` option must be an element or a valid selector.');\n            }\n        }\n        if (!isElement(container)) {\n            if (element.parentElement) {\n                container = element.parentElement;\n            }\n            else {\n                container = element.ownerDocument.body;\n            }\n        }\n        this.container = container;\n        const tagName = element.localName;\n        let src = '';\n        if (tagName === 'img') {\n            ({ src } = element);\n        }\n        else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n            src = element.toDataURL();\n        }\n        const { template } = options;\n        if (template && isString(template)) {\n            const templateElement = document.createElement('template');\n            const documentFragment = document.createDocumentFragment();\n            templateElement.innerHTML = template.replace(REGEXP_BLOCKED_TAGS, '&lt;$1&gt;');\n            documentFragment.appendChild(templateElement.content);\n            Array.from(documentFragment.querySelectorAll(CROPPER_IMAGE)).forEach((image) => {\n                image.setAttribute('src', src);\n                image.setAttribute('alt', element.alt || 'The image to crop');\n                // Inherit additional attributes from HTMLImageElement\n                if (tagName === 'img') {\n                    [\n                        'crossorigin',\n                        'decoding',\n                        'elementtiming',\n                        'fetchpriority',\n                        'loading',\n                        'referrerpolicy',\n                        'sizes',\n                        'srcset',\n                    ].forEach((attribute) => {\n                        if (element.hasAttribute(attribute)) {\n                            image.setAttribute(attribute, element.getAttribute(attribute) || '');\n                        }\n                    });\n                }\n            });\n            if (element.parentElement) {\n                element.style.display = 'none';\n                container.insertBefore(documentFragment, element.nextSibling);\n            }\n            else {\n                container.appendChild(documentFragment);\n            }\n        }\n    }\n    getCropperCanvas() {\n        return this.container.querySelector(CROPPER_CANVAS);\n    }\n    getCropperImage() {\n        return this.container.querySelector(CROPPER_IMAGE);\n    }\n    getCropperSelection() {\n        return this.container.querySelector(CROPPER_SELECTION);\n    }\n    getCropperSelections() {\n        return this.container.querySelectorAll(CROPPER_SELECTION);\n    }\n    destroy() {\n        var _a;\n        const cropperCanvas = this.getCropperCanvas();\n        if (cropperCanvas) {\n            (_a = cropperCanvas.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(cropperCanvas);\n        }\n        if (this.element) {\n            this.element.style.display = '';\n        }\n    }\n}\nCropper.version = '2.1.0';\n\nexport { DEFAULT_TEMPLATE, Cropper as default };\n"],"names":["module","exports","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","CROPPER_CANVAS","CROPPER_CROSSHAIR","CROPPER_GIRD","CROPPER_HANDLE","CROPPER_IMAGE","CROPPER_SELECTION","CROPPER_SHADE","CROPPER_VIEWER","ACTION_SELECT","ACTION_MOVE","ACTION_SCALE","ACTION_ROTATE","ACTION_TRANSFORM","ACTION_NONE","ACTION_RESIZE_NORTH","ACTION_RESIZE_EAST","ACTION_RESIZE_SOUTH","ACTION_RESIZE_WEST","ACTION_RESIZE_NORTHEAST","ACTION_RESIZE_NORTHWEST","ACTION_RESIZE_SOUTHEAST","ACTION_RESIZE_SOUTHWEST","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_ERROR","EVENT_KEYDOWN","EVENT_LOAD","EVENT_WHEEL","EVENT_ACTION","EVENT_ACTION_END","EVENT_ACTION_START","EVENT_CHANGE","EVENT_TRANSFORM","Number","isNaN","isNumber","value","isPositiveNumber","Infinity","isObject","hasOwnProperty","Object","prototype","isPlainObject","constructor","call","error","isFunction","isElement","node","nodeType","REGEXP_CAMEL_CASE","toKebabCase","String","replace","toLowerCase","REGEXP_KEBAB_CASE","toCamelCase","substring","slice","toUpperCase","REGEXP_SPACES","off","target","types","listener","options","trim","split","forEach","type","removeEventListener","on","addEventListener","once","assign","defaultEventOptions","bubbles","cancelable","composed","resolvedPromise","Promise","resolve","getOffset","element","ownerDocument","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","REGEXP_ANGLE_UNIT","toAngleInRadian","angle","parseFloat","unit","match","Math","PI","SIZE_ADJUSTMENT_TYPE_CONTAIN","getAdjustedSizes","data","aspectRatio","width","height","isValidWidth","isValidHeight","adjustedWidth","multiplyMatrices","matrix","args","length","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","REGEXP_SUFFIX","DEFAULT_SHADOW_ROOT_MODE","shadowRoots","WeakMap","styleSheets","tagNames","Map","supportsAdoptedStyleSheets","Array","isArray","adoptedStyleSheets","CropperElement","HTMLElement","$sharedStyle","this","themeColor","_a","_b","super","shadowRootMode","slottable","name","getPrototypeOf","$name","set","tagName","observedAttributes","attributeChangedCallback","oldValue","newValue","is","propertyName","newPropertyValue","styleSheet","get","styles","replaceSync","textContent","$propertyChangedCallback","hasAttribute","setAttribute","removeAttribute","getAttribute","connectedCallback","attribute","property","isUndefined","defineProperty","enumerable","configurable","shadow","shadowRoot","attachShadow","mode","$addStyles","$style","$template","template","createElement","innerHTML","appendChild","content","slot","disconnectedCallback","has","delete","$getTagNameOf","$setStyles","properties","keys","test","style","$getShadowRoot","CSSStyleSheet","concat","$emit","detail","dispatchEvent","CustomEvent","emit","$nextTick","callback","context","then","bind","nextTick","$define","customElements","define","$version","CropperCanvas","arguments","$onPointerDown","$onPointerMove","$onPointerUp","$onWheel","$wheeling","$pointers","$action","background","disabled","scaleStep","$bind","$unbind","$handlePointerDown","$handlePointerMove","$handlePointerUp","$handleWheel","passive","capture","event","buttons","button","pointerType","ctrlKey","action","changedTouches","from","identifier","pageX","pageY","startX","startY","endX","endY","pointerId","size","relatedEvent","preventDefault","willChange","pointer","pointers2","maxRotateRate","maxScaleRate","rotate","scale","centerX","centerY","pointer2","x1","y1","x2","y2","z1","z2","atan","rotateRate","absRotateRate","abs","sqrt","scaleRate","absScaleRate","rotatable","scalable","values","setTimeout","deltaY","$setAction","$toCanvas","reject","isConnected","Error","canvas","offsetWidth","offsetHeight","cropperImage","querySelector","$ready","image","getContext","a","b","c","d","e","f","$getTransform","newE","newF","destWidth","naturalWidth","destHeight","naturalHeight","fillStyle","fillRect","beforeDraw","save","translate","transform","drawImage","restore","catch","canvasCache","NATIVE_ATTRIBUTES","CropperImage","$matrix","$onLoad","$onCanvasAction","$onCanvasActionEnd","$onCanvasActionStart","$actionStartTarget","$image","Image","initialCenterSize","skewable","translatable","alt","crossorigin","decoding","elementtiming","fetchpriority","loading","referrerpolicy","sizes","src","srcset","$canvas","includes","$center","closest","display","position","$handleAction","$handleLoad","removeChild","hidden","$selection","multiple","active","movable","dynamic","contains","$move","x","y","$rotate","clientX","clientY","zoomable","$zoom","cos","sin","scaleX","skewY","skewX","scaleY","clientRect","moveX","moveY","translateX","translateY","$transform","promise","complete","onLoad","onError","parentElement","container","containerWidth","containerHeight","$scale","max","min","$translate","$moveTo","$setTransform","radian","$skew","radianX","radianY","tan","oldMatrix","newMatrix","join","$resetTransform","CropperShade","$onSelectionChange","defaultPrevented","$change","$render","$reset","outlineWidth","innerWidth","CropperHandle","$onCanvasCropEnd","$onCanvasCropStart","plain","CropperSelection","$onDocumentKeyDown","$changing","$initialSelection","NaN","initialAspectRatio","initialCoverage","linked","resizable","keyboard","outlined","precise","$initSelection","$handleKeyDown","selections","$getSelections","selection","$removeSelection","$handleActionStart","$handleActionEnd","querySelectorAll","center","resize","$createSelection","newSelection","cloneNode","insertBefore","nextSibling","index","indexOf","activeSelection","$clear","relatedTarget","currentTarget","composedPath","find","getComposedPathTarget","shiftKey","offset","$resize","activeElement","contentEditable","key","metaKey","offsetX","offsetY","hasValidAspectRatio","newWidth","newHeight","newX","newY","_force","round","CropperGrid","bordered","columns","covered","rows","fragment","createDocumentFragment","i","row","j","column","CropperCrosshair","centered","imageCache","selectionCache","sourceImageCache","RESIZE_VERTICAL","CropperViewer","$onSourceImageLoad","$onSourceImageTransform","$sourceImage","rootNode","getRootNode","getRootDocument","$handleSelectionChange","$handleSourceImageLoad","$handleSourceImageTransform","oldSrc","newSrc","clientWidth","clientHeight","$transformImageByOffset"],"sourceRoot":""}